<!DOCTYPE html>
<!--
// Copyright (C) 2014 The Syncthing Authors.
//
// This Source Code Form is subject to the terms of the Mozilla Public
// License, v. 2.0. If a copy of the MPL was not distributed with this file,
// You can obtain one at http://mozilla.org/MPL/2.0/.

-->
<html lang="en" ng-app="syncthing" ng-controller="SyncthingController" class="ng-cloak">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">
  <link rel="shortcut icon" href="assets/img/favicon.png">

  <title>{{thisDeviceName()}} | Syncthing</title>
  <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/font/raleway.css" rel="stylesheet">
  <link href="assets/css/overrides.css" rel="stylesheet">
</head>

<body>
  <!-- Top bar -->

  <nav class="navbar navbar-top navbar-default" role="navigation">
    <div class="container">
      <span class="navbar-brand"><img class="logo" src="assets/img/logo-horizontal.svg" height="32" width="117"/></span>
      <p class="navbar-text hidden-xs" ng-class="{'hidden-sm':upgradeInfo && upgradeInfo.newer}">{{thisDeviceName()}}</p>
      <ul class="nav navbar-nav navbar-right">
        <li ng-if="upgradeInfo && upgradeInfo.newer">
          <button type="button" class="btn navbar-btn btn-primary btn-sm" href="" ng-click="upgrade()">
            <span class="glyphicon glyphicon-chevron-up"></span>&nbsp;
            <span translate translate-value-version="{{upgradeInfo.latest}}">Upgrade To {%version%}</span>
          </button>
        </li>
        <li ng-if="upgradeInfo && upgradeInfo.majorNewer">
          <button type="button" class="btn navbar-btn btn-danger btn-sm" href="" ng-click="upgradeMajor()">
            <span class="glyphicon glyphicon-chevron-up"></span>&nbsp;
            <span translate translate-value-version="{{upgradeInfo.latest}}">Upgrade To {%version%}</span>
          </button>
        </li>
        <li class="dropdown" language-select></li>
        <li class="hidden-xs">
          <a href="http://docs.syncthing.net/intro/gui.html" target="_blank">
            <span class="glyphicon glyphicon-book"></span>&nbsp;<span translate>Help</span>
          </a>
        </li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="glyphicon glyphicon-cog" aria-label="Edit"></span>&nbsp;<span translate>Actions</span><span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="" ng-click="editSettings()"><span class="glyphicon glyphicon-cog"></span>&nbsp;<span translate>Settings</span></a></li>
            <li><a href="" ng-click="idDevice()"><span class="glyphicon glyphicon-qrcode"></span>&nbsp;<span translate>Show ID</span></a></li>
            <li class="divider"></li>
            <li><a href="" ng-click="shutdown()"><span class="glyphicon glyphicon-off"></span>&nbsp;<span translate>Shutdown</span></a></li>
            <li><a href="" ng-click="restart()"><span class="glyphicon glyphicon-refresh"></span>&nbsp;<span translate>Restart</span></a></li>
            <li class="divider"></li>
            <li class="visible-xs">
              <a href="http://docs.syncthing.net/intro/gui.html" target="_blank">
                <span class="glyphicon glyphicon-book"></span>&nbsp;<span translate>Help</span>
              </a>
            </li>
            <li><a href="" ng-click="about()"><span class="glyphicon glyphicon-heart-empty"></span>&nbsp;<span translate>About</span></a></li>
            <li class="divider"></li>
            <li><a href="" ng-click="advanced()"><span class="glyphicon glyphicon-cog"></span>&nbsp;<span translate>Advanced</span></a></li>
          </ul>
        </li>
      </ul>
    </div>
  </nav>

  <div class="container">

    <!-- Panel: Restart Needed -->

    <div ng-if="!configInSync" class="row">
      <div class="col-md-12">
        <div class="panel panel-warning">
          <div class="panel-heading"><h3 class="panel-title"><span class="glyphicon glyphicon-exclamation-sign"></span><span translate>Restart Needed</span></h3></div>
          <div class="panel-body">
            <p translate>The configuration has been saved but not activated. Syncthing must restart to activate the new configuration.</p>
          </div>
          <div class="panel-footer">
            <button type="button" class="btn btn-sm btn-default pull-right" ng-click="restart()"><span class="glyphicon glyphicon-refresh"></span>&nbsp;<span translate>Restart</span></button>
            <div class="clearfix"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Panel: New Device -->

    <div ng-repeat="(device, event) in deviceRejections" class="row">
      <div class="col-md-12">
        <div class="panel panel-warning">
          <div class="panel-heading">
            <h3 class="panel-title">
              <identicon data-value="device"></identicon>&nbsp;<span translate>New Device</span>
            </h3>
          </div>
          <div class="panel-body">
            <p>
              <small>{{ event.time | date:"yyyy-MM-dd HH:mm:ss" }}:</small>
              <span translate translate-value-device="{{ device }}" translate-value-address="{{ event.data.address }}">
                Device {%device%} ({%address%}) wants to connect. Add new device?
              <span>
            </p>
          </div>
          <div class="panel-footer clearfix">
            <div class="pull-right">
              <button class="btn btn-sm btn-success" ng-click="addNewDeviceID(device)"><span class="glyphicon glyphicon-ok"></span>&nbsp;<span translate>Add</span></button>
              <button class="btn btn-sm btn-danger" ng-click="ignoreRejectedDevice(device)"><span class="glyphicon glyphicon-remove"></span>&nbsp;<span translate>Ignore</span></button>
              <button class="btn btn-sm btn-default" ng-click="dismissDeviceRejection(device)"><span class="glyphicon glyphicon-time"></span>&nbsp;<span translate>Later</span></button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Panel: New Folder -->

    <div ng-repeat="(key, event) in folderRejections" class="row reject">
      <div class="col-md-12">
        <div class="panel panel-warning">
          <div class="panel-heading">
            <h3 class="panel-title"><span class="glyphicon glyphicon-hdd"></span>
              <span translate ng-if="!folders[event.data.folder]">New Folder</span>
              <span translate ng-if="folders[event.data.folder]">Share Folder</span>
            </h3>
          </div>
          <div class="panel-body">
            <p>
              <small>{{ event.time | date:"yyyy-MM-dd HH:mm:ss" }}:</small>
              <span translate translate-value-device="{{ deviceName(findDevice(event.data.device)) }}" translate-value-folder="{{ event.data.folder }}">
                {%device%} wants to share folder "{%folder%}".
              </span>
              <span translate ng-if="folders[event.data.folder]">Share this folder?</span>
              <span translate ng-if="!folders[event.data.folder]">Add new folder?</span>
            </p>
          </div>
          <div class="panel-footer clearfix">
            <div class="pull-right">
              <button class="btn btn-sm btn-success" ng-click="addFolderAndShare(event.data.folder, event.data.device)" ng-if="!folders[event.data.folder]">
                <span class="glyphicon glyphicon-ok"></span>&nbsp;<span translate>Add</span>
              </button>
              <button class="btn btn-sm btn-success" ng-click="shareFolderWithDevice(event.data.folder, event.data.device)" ng-if="folders[event.data.folder]">
                <span class="glyphicon glyphicon-ok"></span>&nbsp;<span translate>Share</span>
              </button>
              <button class="btn btn-sm btn-default" ng-click="dismissFolderRejection(event.data.folder, event.data.device)">
                <span class="glyphicon glyphicon-time"></span>&nbsp;<span translate>Later</span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Panel: Notice -->

    <div ng-if="errorList().length > 0" class="row">
      <div class="col-md-12">
        <div class="panel panel-warning">
          <div class="panel-heading"><h3 class="panel-title"><span class="glyphicon glyphicon-exclamation-sign"></span><span translate>Notice</span></h3></div>
          <div class="panel-body">
            <p ng-repeat="err in errorList()"><small>{{err.time | date:"yyyy-MM-dd HH:mm:ss"}}:</small> {{friendlyDevices(err.error)}}</p>
          </div>
          <div class="panel-footer">
            <button type="button" class="pull-right btn btn-sm btn-default" ng-click="clearErrors()"><span class="glyphicon glyphicon-ok"></span>&nbsp;<span translate>OK</span></button>
            <div class="clearfix"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- First regular row -->

    <div class="row">

      <!-- Folder list (top left) -->

      <div class="col-md-6">
        <div class="panel-group" id="folders">
        <div class="visible-xs"><h3><span translate>Folders</span></h3><hr></div>
          <div class="panel panel-default" ng-repeat="folder in folderList()">
            <div class="panel-heading" data-toggle="collapse" data-parent="#folders" href="#folder-{{$index}}" style="cursor: pointer">
              <div class="panel-progress" ng-show="folderStatus(folder) == 'syncing'" ng-attr-style="width: {{syncPercentage(folder.id)}}%"></div>
              <h3 class="panel-title">
                <span class="glyphicon glyphicon-hdd hidden-xs"></span>{{folder.id}}
                <span class="pull-right text-{{folderClass(folder)}}" ng-switch="folderStatus(folder)">
                  <span ng-switch-when="unknown"><span class="hidden-xs" translate>Unknown</span><span class="visible-xs">&#9724;</span></span>
                  <span ng-switch-when="unshared"><span class="hidden-xs" translate>Unshared</span><span class="visible-xs">&#9724;</span></span>
                  <span ng-switch-when="stopped"><span class="hidden-xs" translate>Stopped</span><span class="visible-xs">&#9724;</span></span>
                  <span ng-switch-when="scanning"><span class="hidden-xs" translate>Scanning</span><span class="visible-xs">&#9724;</span></span>
                  <span ng-switch-when="idle"><span class="hidden-xs" translate>Up to Date</span><span class="visible-xs">&#9724;</span></span>
                  <span ng-switch-when="syncing">
                    <span class="hidden-xs" translate>Syncing</span>
                    ({{syncPercentage(folder.id)}}%)
                  </span>
                  <span ng-switch-when="outofsync"><span class="hidden-xs" translate>Out of Sync</span><span class="visible-xs">&#9724;</span></span>
                </span>
              </h3>
            </div>
            <div id="folder-{{$index}}" class="panel-collapse collapse">
              <div class="panel-body">
                <table class="table table-condensed table-striped">
                  <tbody>
                    <tr>
                      <th><span class="glyphicon glyphicon-folder-open"></span>&nbsp;<span translate>Folder Path</span></th>
                      <td class="text-right">{{folder.path}}</td>
                    </tr>
                    <tr ng-if="model[folder.id].invalid || model[folder.id].error">
                      <th><span class="glyphicon glyphicon-warning-sign"></span>&nbsp;<span translate>Error</span></th>
                      <td class="text-right">{{model[folder.id].invalid || model[folder.id].error}}</td>
                    </tr>
                    <tr>
                      <th><span class="glyphicon glyphicon-globe"></span>&nbsp;<span translate>Global State</span></th>
                      <td class="text-right">{{model[folder.id].globalFiles | alwaysNumber}} <span translate>items</span>, ~{{model[folder.id].globalBytes | binary}}B</td>
                    </tr>
                    <tr>
                      <th><span class="glyphicon glyphicon-home"></span>&nbsp;<span translate>Local State</span></th>
                      <td class="text-right">{{model[folder.id].localFiles | alwaysNumber}} <span translate>items</span>, ~{{model[folder.id].localBytes | binary}}B</td>
                    </tr>
                    <tr ng-if="model[folder.id].needFiles > 0">
                      <th><span class="glyphicon glyphicon-cloud-download"></span>&nbsp;<span translate>Out of Sync</span></th>
                      <td class="text-right">
                        <a ng-click="showNeed(folder.id)" href="">{{model[folder.id].needFiles | alwaysNumber}} <span translate>items</span>, ~{{model[folder.id].needBytes | binary}}B</a>
                      </td>
                    </tr>
                    <tr ng-if="!folder.readOnly && (folderStatus(folder) === 'outofsync' || hasFailedFiles(folder.id))">
                      <th><span class="glyphicon glyphicon-exclamation-sign"></span>&nbsp;<span translate>Failed Items</span></th>
                      <!-- Show the number of failed items as a link to bring up the list. -->
                      <td ng-if="hasFailedFiles(folder.id)" class="text-right">
                        <a ng-click="showFailed(folder.id)" href="">{{failed[folder.id].length | alwaysNumber}}&nbsp;<span translate>items</span></a>
                      </td>
                      <!-- The list of failed items hasn't loaded yet; show an ellipsis for the time being. -->
                      <td ng-if="!hasFailedFiles(folder.id)" class="text-right">
                        ...
                      </td>
                    </tr>
                    <tr ng-if="folder.readOnly">
                      <th><span class="glyphicon glyphicon-lock"></span>&nbsp;<span translate>Folder Master</span></th>
                      <td class="text-right">
                        <span translate>Yes</span>
                      </td>
                    </tr>
                    <tr ng-if="model[folder.id].ignorePatterns">
                      <th><span class="glyphicon glyphicon-eye-close"></span>&nbsp;<span translate>Ignore Patterns</span></th>
                      <td class="text-right">
                        <span translate>Yes</span>
                      </td>
                    </tr>
                    <tr ng-if="folder.ignorePerms">
                      <th><span class="glyphicon glyphicon-unchecked"></span>&nbsp;<span translate>Ignore Permissions</span></th>
                      <td class="text-right">
                        <span translate>Yes</span>
                      </td>
                    </tr>
                    <tr ng-if="folder.rescanIntervalS != 60">
                      <th><span class="glyphicon glyphicon-refresh"></span>&nbsp;<span translate>Rescan Interval</span></th>
                      <td class="text-right">{{folder.rescanIntervalS}} s</td>
                    </tr>
                    <tr ng-if="folder.order != 'random'">
                      <th><span class="glyphicon glyphicon-sort"></span>&nbsp;<span translate>File Pull Order</span></th>
                      <td class="text-right" ng-switch="folder.order">
                        <span ng-switch-when="random" translate>Random</span>
                        <span ng-switch-when="alphabetic" translate>Alphabetic</span>
                        <span ng-switch-when="smallestFirst" translate>Smallest First</span>
                        <span ng-switch-when="largestFirst" translate>Largest First</span>
                        <span ng-switch-when="oldestFirst" translate>Oldest First</span>
                        <span ng-switch-when="newestFirst" translate>Newest First</span>
                      </td>
                    </tr>
                    <tr ng-if="folder.versioning.type">
                      <th><span class="glyphicon glyphicon-tags"></span>&nbsp;<span translate>File Versioning</span></th>
                      <td class="text-right" ng-switch="folder.versioning.type">
                        <span ng-switch-when="trashcan" translate>Trash Can File Versioning</span>
                        <span ng-switch-when="staggered" translate>Staggered File Versioning</span>
                        <span ng-switch-when="simple" translate>Simple File Versioning</span>
                        <span ng-switch-when="external" translate>External File Versioning</span>
                      </td>
                    </tr>
                    <tr>
                      <th><span class="glyphicon glyphicon-share-alt"></span>&nbsp;<span translate>Shared With</span></th>
                      <td class="text-right">{{sharesFolder(folder)}}</td>
                    </tr>
                    <tr ng-if="!folder.readOnly && folderStats[folder.id].lastFile && folderStats[folder.id].lastFile.filename">
                      <th><span class="glyphicon glyphicon-transfer"></span>&nbsp;<span translate>Last File Received</span></th>
                      <td class="text-right">
                        <span title="{{folderStats[folder.id].lastFile.filename}} @ {{folderStats[folder.id].lastFile.at | date:'yyyy-MM-dd HH:mm:ss'}}">
                          <span translate ng-if="!folderStats[folder.id].lastFile.deleted">Updated</span>
                          <span translate ng-if="folderStats[folder.id].lastFile.deleted">Deleted</span>
                          {{folderStats[folder.id].lastFile.filename | basename}}
                        </span>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <div class="panel-footer">
                <button class="btn btn-sm btn-danger pull-left" ng-if="folderStatus(folder) == 'outofsync' && folder.readOnly" ng-click="override(folder.id)" href=""><span class="glyphicon glyphicon-upload"></span>&nbsp;<span translate>Override Changes</span></button>
                <span class="pull-right">
                  <button class="btn btn-sm btn-default" href="" ng-show="['idle', 'stopped'].indexOf(folderStatus(folder)) > -1" ng-click="rescanFolder(folder.id)"><span class="glyphicon glyphicon-refresh"></span>&nbsp;<span translate>Rescan</span></button>
                  <button class="btn btn-sm btn-default" href="" ng-click="editFolder(folder)"><span class="glyphicon glyphicon-pencil"></span>&nbsp;<span translate>Edit</span></button>
                </span>
                <div class="clearfix"></div>
              </div>
            </div>
          </div>
        </div>
        <span class="pull-right">
          <button class="btn btn-sm btn-default" ng-click="rescanAllFolders()"><span class="glyphicon glyphicon-repeat"></span>&nbsp;<span translate>Rescan All</span></button>
          <button class="btn btn-sm btn-default" ng-click="addFolder()"><span class="glyphicon glyphicon-plus"></span>&nbsp;<span translate>Add Folder</span></button>
        </span>
        <div class="clearfix"></div>
        <hr class="visible-sm"/>
      </div>

      <!-- Device list (top right) -->

      <!-- This device -->

      <div class="col-md-6">
      <div class="visible-xs"><h3><span translate>Devices</span></h3><hr></div>
        <div class="panel panel-default" ng-repeat="deviceCfg in [thisDevice()]">
          <div class="panel-heading" data-toggle="collapse" href="#device-this" style="cursor: pointer">
            <h3 class="panel-title">
              <identicon data-value="deviceCfg.deviceID"></identicon>&emsp;{{deviceName(deviceCfg)}}
            </h3>
          </div>
          <div id="device-this" class="panel-collapse collapse in">
            <div class="panel-body">
              <table class="table table-condensed table-striped">
                <tbody>
                  <tr>
                    <th><span class="glyphicon glyphicon-cloud-download"></span>&nbsp;<span translate>Download Rate</span></th>
                    <td class="text-right">{{connectionsTotal.inbps | binary}}B/s ({{connectionsTotal.inBytesTotal | binary}}B)</td>
                  </tr>
                  <tr>
                    <th><span class="glyphicon glyphicon-cloud-upload"></span>&nbsp;<span translate>Upload Rate</span></th>
                    <td class="text-right">{{connectionsTotal.outbps | binary}}B/s ({{connectionsTotal.outBytesTotal | binary}}B)</td>
                  </tr>
                  <tr>
                    <th><span class="glyphicon glyphicon-home"></span>&nbsp;<span translate>Local State (Total)</span> </th>
                    <td class="text-right">{{foldersTotalLocalFiles | alwaysNumber}} <span translate>items</span>, ~{{ foldersTotalLocalBytes | binary}}B</td>
                  </tr>
                  <tr>
                    <th><span class="glyphicon glyphicon-th"></span>&nbsp;<span translate>RAM Utilization</span></th>
                    <td class="text-right">{{system.sys | binary}}B</td>
                  </tr>
                  <tr>
                    <th><span class="glyphicon glyphicon-dashboard"></span>&nbsp;<span translate>CPU Utilization</span></th>
                    <td class="text-right">{{system.cpuPercent | alwaysNumber | natural:1}}%</td>
                  </tr>
                  <tr ng-if="system.extAnnounceOK != undefined && announceServersTotal > 0">
                    <th><span class="glyphicon glyphicon-bullhorn"></span>&nbsp;<span translate>Global Discovery</span></th>
                    <td class="text-right">
                      <span ng-if="announceServersFailed.length == 0" class="data text-success">
                        <span>OK</span>
                      </span>
                      <span ng-if="announceServersFailed.length != 0" class="data" ng-class="{'text-danger': announceServersFailed.length == announceServersTotal}">
                        <span popover data-trigger="hover" data-placement="bottom" data-content="{{announceServersFailed.join('\n')}}">
                          {{announceServersTotal-announceServersFailed.length}}/{{announceServersTotal}}
                        </span>
                      </span>
                    </td>
                  </tr>
                  <tr>
                    <th><span class="glyphicon glyphicon-time"></span>&nbsp;<span translate>Uptime</span></th>
                    <td class="text-right">{{system.uptime | duration:"m"}}</td>
                  </tr>
                  <tr>
                    <th><span class="glyphicon glyphicon-tag"></span>&nbsp;<span translate>Version</span></th>
                    <td class="text-right">{{versionString()}}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- Remote devices -->

        <div class="panel-group" id="devices">
          <div class="panel panel-default" ng-repeat="deviceCfg in otherDevices()">
            <div class="panel-heading" data-toggle="collapse" data-parent="#devices" href="#device-{{$index}}" style="cursor: pointer">
              <div class="panel-progress" ng-show="deviceStatus(deviceCfg) == 'syncing'" ng-attr-style="width: {{completion[deviceCfg.deviceID]._total | number:0}}%"></div>
              <h3 class="panel-title">
                <identicon data-value="deviceCfg.deviceID"></identicon>&emsp;{{deviceName(deviceCfg)}}
                <span ng-switch="deviceStatus(deviceCfg)" class="pull-right text-{{deviceClass(deviceCfg)}}">
                  <span ng-switch-when="insync"><span class="hidden-xs" translate>Up to Date</span><span class="visible-xs">&#9724;</span></span>
                  <span ng-switch-when="syncing">
                    <span class="hidden-xs" translate>Syncing</span> ({{completion[deviceCfg.deviceID]._total | number:0}}%)
                  </span>
                  <span ng-switch-when="disconnected"><span class="hidden-xs" translate>Disconnected</span><span class="visible-xs">&#9724;</span></span>
                  <span ng-switch-when="unused"><span class="hidden-xs" translate>Unused</span><span class="visible-xs">&#9724;</span></span>
                </span>
              </h3>
            </div>
            <div id="device-{{$index}}" class="panel-collapse collapse">
              <div class="panel-body">
                <table class="table table-condensed table-striped">
                  <tbody>
                    <tr ng-if="connections[deviceCfg.deviceID]">
                      <th><span class="glyphicon glyphicon-cloud-download"></span>&nbsp;<span translate>Download Rate</span></th>
                      <td class="text-right">{{connections[deviceCfg.deviceID].inbps | binary}}B/s ({{connections[deviceCfg.deviceID].inBytesTotal | binary}}B)</td>
                    </tr>
                    <tr ng-if="connections[deviceCfg.deviceID]">
                      <th><span class="glyphicon glyphicon-cloud-upload"></span>&nbsp;<span translate>Upload Rate</span></th>
                      <td class="text-right">{{connections[deviceCfg.deviceID].outbps | binary}}B/s ({{connections[deviceCfg.deviceID].outBytesTotal | binary}}B)</td>
                    </tr>
                    <tr>
                      <th><span class="glyphicon glyphicon-link"></span>&nbsp;<span translate>Address</span></th>
                      <td class="text-right">{{deviceAddr(deviceCfg)}}</td>
                    </tr>
                    <tr ng-if="deviceCfg.compression != 'metadata'">
                      <th><span class="glyphicon glyphicon-compressed"></span>&nbsp;<span translate>Compression</span></th>
                      <td class="text-right">
                        <span ng-if="deviceCfg.compression == 'always'" translate>All Data</span>
                        <span ng-if="deviceCfg.compression == 'never'" translate>Off</span>
                      </td>
                    </tr>
                    <tr ng-if="deviceCfg.introducer">
                      <th><span class="glyphicon glyphicon-thumbs-up"></span>&nbsp;<span translate>Introducer</span></th>
                      <td translate class="text-right">Yes</td>
                    </tr>
                    <tr ng-if="connections[deviceCfg.deviceID]">
                      <th><span class="glyphicon glyphicon-tag"></span>&nbsp;<span translate>Version</span></th>
                      <td class="text-right">{{connections[deviceCfg.deviceID].clientVersion}}</td>
                    </tr>
                    <tr ng-if="!connections[deviceCfg.deviceID]">
                      <th><span class="glyphicon glyphicon-eye-open"></span>&nbsp;<span translate>Last seen</span></th>
                      <td translate ng-if="!deviceStats[deviceCfg.deviceID].lastSeenDays || deviceStats[deviceCfg.deviceID].lastSeenDays >= 365" class="text-right">Never</td>
                      <td ng-if="deviceStats[deviceCfg.deviceID].lastSeenDays < 365" class="text-right">{{deviceStats[deviceCfg.deviceID].lastSeen | date:"yyyy-MM-dd HH:mm:ss"}}</td>
                    </tr>
                    <tr ng-if="deviceFolders(deviceCfg).length > 0">
                      <th><span class="glyphicon glyphicon-hdd"></span>&nbsp;<span translate>Folders</span></th>
                      <td class="text-right">{{deviceFolders(deviceCfg).join(", ")}}</td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <div class="panel-footer">
                <span class="pull-right"><a class="btn btn-sm btn-default" href="" ng-click="editDevice(deviceCfg)"><span class="glyphicon glyphicon-pencil"></span>&nbsp;<span translate>Edit</span></a></span>
                <div class="clearfix"></div>
              </div>
            </div>
          </div>
        </div>
        <div class="form-group">
          <button class="btn btn-sm btn-default pull-right" ng-click="addDevice()"><span class="glyphicon glyphicon-plus"></span>&nbsp;<span translate>Add Device</span></button>
          <div class="clearfix"></div>
        </div>
      </div>
    </div> <!-- /row -->

  </div> <!-- /container -->

  <!-- Bottom bar -->

  <nav class="navbar navbar-default navbar-fixed-bottom">
    <div class="container">
      <ul class="nav navbar-nav">
        <li><a class="navbar-link" href="http://syncthing.net/" target="_blank"><span class="glyphicon glyphicon-home"></span>&nbsp;<span translate>Home page</span></a></li>
        <li><a class="navbar-link" href="http://docs.syncthing.net/" target="_blank"><span class="glyphicon glyphicon-book"></span>&nbsp;<span translate>Documentation</span></a></li>
        <li><a class="navbar-link" href="https://forum.syncthing.net" target="_blank"><span class="glyphicon glyphicon-question-sign"></span>&nbsp;<span translate>Support</span></a></li>
        <li><a class="navbar-link" href="https://github.com/syncthing/syncthing/releases" target="_blank"><span class="glyphicon glyphicon-info-sign"></span>&nbsp;<span translate>Changelog</span></a></li>
        <li><a class="navbar-link" href="https://github.com/syncthing/syncthing/issues" target="_blank"><span class="glyphicon glyphicon-warning-sign"></span>&nbsp;<span translate>Bugs</span></a></li>
        <li><a class="navbar-link" href="https://github.com/syncthing/syncthing" target="_blank"><span class="glyphicon glyphicon-wrench"></span>&nbsp;<span translate>Source Code</span></a></li>
        <li><a class="navbar-link" href="https://twitter.com/syncthing" target="_blank"><span class="glyphicon glyphicon-send"></span>&nbsp;Twitter</a></li>
      </ul>
    </div>
  </nav>

  <!-- Network error modal -->

  <modal id="networkError" status="danger" icon="exclamation-sign" title="{{'Connection Error' | translate}}">
    <p translate>
      Syncthing seems to be down, or there is a problem with your Internet connection. Retrying&hellip;
    </p>
  </modal>

  <!-- HTTP error modal -->

  <modal id="httpError" status="danger" icon="exclamation-sign" title="{{'Connection Error' | translate}}">
    <p translate>
      Syncthing seems to be experiencing a problem processing your request. Please refresh the page or restart Syncthing if the problem persists.
    </p>
  </modal>

  <!-- Restarting modal -->

  <modal id="restarting" icon="refresh" title="{{'Restarting' | translate}}" status="info">
    <p><span translate>Syncthing is restarting.</span> <span translate>Please wait</span>...</p>
  </modal>

  <!-- Upgrading modal -->

  <modal id="upgrading" icon="refresh" title="{{'Upgrading' | translate}}" status="info">
    <p><span translate>Syncthing is upgrading.</span> <span translate>Please wait</span>...</p>
  </modal>

  <!-- Shutdown modal -->

  <modal id="shutdown" icon="off" status="success" title="{{'Shutdown Complete' | translate}}">
    <p translate>Syncthing has been shut down.</p>
  </modal>

  <!-- ID modal -->

  <modal id="idqr" large="yes" status="info" close="yes" icon="qrcode" title="{{'Device Identification' | translate}} &mdash; {{deviceName(thisDevice())}}">
    <div select-on-click class="well well-sm text-monospace text-center">{{myID}}</div>
    <img ng-if="myID" class="center-block img-thumbnail" ng-src="qr/?text={{myID}}"/>
  </modal>

  <!-- Major upgrade modal -->

  <div id="majorUpgrade" class="modal fade" tabindex="-1" data-backdrop="true" data-keyboard="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header alert alert-danger">
          <h4 class="modal-title">
            <span ng-if="icon" class="glyphicon glyphicon-chevron-up"></span>
            <span translate>Major Upgrade</span>
          </h4>
        </div>
        <div class="modal-body">
          <p>
            <span translate>This is a major version upgrade.</span>
            <span translate>A new major version may not be compatible with previous versions.</span>
            <span translate>Please consult the release notes before performing a major upgrade.</span>
          </p>
          <p>
            <a href="https://github.com/syncthing/syncthing/releases/tag/{{upgradeInfo.latest}}" target="_blank" translate>Release Notes</a>
          </p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary btn-sm" ng-click="upgrade()"><span class="glyphicon glyphicon-ok"></span>&nbsp;<span translate>Upgrade</span></button>
          <button type="button" class="btn btn-default btn-sm" data-dismiss="modal"><span class="glyphicon glyphicon-remove"></span>&nbsp;<span translate>Close</span></button>
        </div>
      </div>
    </div>
  </div>

  <!-- Device editor modal -->

  <div id="editDevice" class="modal fade" tabindex="-1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h4 translate ng-show="!editingExisting" class="modal-title">Add Device</h4>
          <h4 translate ng-show="editingExisting" class="modal-title">Edit Device</h4>
        </div>
        <div class="modal-body">
          <form role="form" name="deviceEditor">
            <div class="form-group" ng-class="{'has-error': deviceEditor.deviceID.$invalid && deviceEditor.deviceID.$dirty}">
              <label translate for="deviceID">Device ID</label>
              <input ng-if="!editingExisting" name="deviceID" id="deviceID" class="form-control text-monospace" type="text" ng-model="currentDevice.deviceID" required valid-deviceid list="discovery-list" />
              <datalist id="discovery-list" ng-if="!editingExisting">
                <option ng-repeat="(id,address) in discovery" value="{{ id }}" />
              </datalist>
              <div ng-if="editingExisting" class="well well-sm text-monospace">{{currentDevice.deviceID}}</div>
              <p class="help-block">
                <span translate ng-if="deviceEditor.deviceID.$valid || deviceEditor.deviceID.$pristine">The device ID to enter here can be found in the "Edit > Show ID" dialog on the other device. Spaces and dashes are optional (ignored).</span>
                <span translate ng-show="!editingExisting && (deviceEditor.deviceID.$valid || deviceEditor.deviceID.$pristine)">When adding a new device, keep in mind that this device must be added on the other side too.</span>
                <span translate ng-if="deviceEditor.deviceID.$error.required && deviceEditor.deviceID.$dirty">The device ID cannot be blank.</span>
                <span translate ng-if="deviceEditor.deviceID.$error.validDeviceid && deviceEditor.deviceID.$dirty">The entered device ID does not look valid. It should be a 52 or 56 character string consisting of letters and numbers, with spaces and dashes being optional.</span>
              </p>
            </div>
            <div class="form-group">
              <label translate for="name">Device Name</label>
              <input id="name" class="form-control" type="text" ng-model="currentDevice.name"></input>
              <p translate ng-if="currentDevice.deviceID == myID" class="help-block">Shown instead of Device ID in the cluster status. Will be advertised to other devices as an optional default name.</p>
              <p translate ng-if="currentDevice.deviceID != myID" class="help-block">Shown instead of Device ID in the cluster status. Will be updated to the name the device advertises if left empty.</p>
            </div>
            <div class="form-group">
              <label translate for="addresses">Addresses</label>
              <input ng-disabled="currentDevice.deviceID == myID" id="addresses" class="form-control" type="text" ng-model="currentDevice._addressesStr"></input>
              <p translate class="help-block">Enter comma separated "ip:port" addresses or "dynamic" to perform automatic discovery of the address.</p>
            </div>
            <div ng-if="!editingSelf" class="form-group">
              <label translate>Compression</label>
              <select class="form-control" ng-model="currentDevice.compression">
                <option value="always" translate>All Data</option>
                <option value="metadata" translate>Metadata Only</option>
                <option value="never" translate>Off</option>
              </select>
            </div>
            <div ng-if="!editingSelf" class="form-group">
              <div class="checkbox">
                <label>
                  <input type="checkbox" ng-model="currentDevice.introducer"> <span translate>Introducer</span>
                </label>
                <p translate class="help-block">Any devices configured on an introducer device will be added to this device as well.</p>
              </div>
            </div>

            <div class="row" ng-if="!editingSelf">
              <div class="col-md-12">
                <div class="form-group">
                  <label translate for="folders">Share Folders With Device</label>
                  <p translate class="help-block">Select the folders to share with this device.</p>
                  <div class="container-fluid">
                    <div class="row" ng-repeat="folderGroup in folderList() | group:3">
                      <div class="checkbox col-md-4" ng-repeat="folder in folderGroup">
                        <label>
                          <input type="checkbox" ng-model="currentDevice.selectedFolders[folder.id]"> {{folder.id}}
                        </label>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary btn-sm" ng-click="saveDevice()" ng-disabled="deviceEditor.$invalid"><span class="glyphicon glyphicon-ok"></span>&nbsp;<span translate>Save</span></button>
          <button type="button" class="btn btn-default btn-sm" data-dismiss="modal"><span class="glyphicon glyphicon-remove"></span>&nbsp;<span translate>Close</span></button>
          <button ng-if="editingExisting && !editingSelf" type="button" class="btn btn-danger pull-left btn-sm" ng-click="deleteDevice()"><span class="glyphicon glyphicon-minus"></span>&nbsp;<span translate>Delete</span></button>
        </div>
      </div>
    </div>
  </div>

  <!-- Folder editor modal -->

  <div id="editFolder" class="modal fade" tabindex="-1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h4 ng-show="!editingExisting" class="modal-title"><span translate>Add Folder</span></h4>
          <h4 ng-show="editingExisting" class="modal-title"><span translate>Edit Folder</span></h4>
        </div>
        <div class="modal-body">
          <form role="form" name="folderEditor">
            <div class="row">
              <div class="col-md-12">
                <div class="form-group" ng-class="{'has-error': folderEditor.folderID.$invalid && folderEditor.folderID.$dirty}">
                  <label for="folderID"><span translate>Folder ID</span></label>
                  <input name="folderID" ng-readonly="editingExisting" id="folderID" class="form-control" type="text" ng-model="currentFolder.id" required unique-folder ng-pattern="/^[a-zA-Z0-9-_.]{1,64}$/"></input>
                  <p class="help-block">
                    <span translate ng-if="folderEditor.folderID.$valid || folderEditor.folderID.$pristine">Short identifier for the folder. Must be the same on all cluster devices.</span>
                    <span translate ng-if="folderEditor.folderID.$error.uniqueFolder">The folder ID must be unique.</span>
                    <span translate ng-if="folderEditor.folderID.$error.required && folderEditor.folderID.$dirty">The folder ID cannot be blank.</span>
                    <span translate ng-if="folderEditor.folderID.$error.pattern && folderEditor.folderID.$dirty">The folder ID must be a short identifier (64 characters or less) consisting of letters, numbers and the dot (.), dash (-) and underscode (_) characters only.</span>
                  </p>
                </div>
                <div class="form-group" ng-class="{'has-error': folderEditor.folderPath.$invalid && folderEditor.folderPath.$dirty}">
                  <label translate for="folderPath">Folder Path</label>
                  <input name="folderPath" ng-readonly="editingExisting" id="folderPath" class="form-control" type="text" ng-model="currentFolder.path" list="directory-list" required />
                  <datalist id="directory-list">
                    <option ng-repeat="directory in directoryList" value="{{ directory }}" />
                  </datalist>
                  <p class="help-block">
                    <span translate ng-if="folderEditor.folderPath.$valid || folderEditor.folderPath.$pristine">Path to the folder on the local computer. Will be created if it does not exist. The tilde character (~) can be used as a shortcut for</span> <code>{{system.tilde}}</code>.
                    <span translate ng-if="folderEditor.folderPath.$error.required && folderEditor.folderPath.$dirty">The folder path cannot be blank.</span>
                  </p>
                </div>
                <div class="form-group" ng-class="{'has-error': folderEditor.rescanIntervalS.$invalid && folderEditor.rescanIntervalS.$dirty}">
                  <label for="rescanIntervalS"><span translate>Rescan Interval</span> (s)</label>
                  <input name="rescanIntervalS" id="rescanIntervalS" class="form-control" type="number" ng-model="currentFolder.rescanIntervalS" required min="0"></input>
                  <p class="help-block">
                    <span translate ng-if="!folderEditor.rescanIntervalS.$valid && folderEditor.rescanIntervalS.$dirty">The rescan interval must be a non-negative number of seconds.</span>
                  </p>
                </div>
              </div>
            </div>
            <div class="row">
              <!-- Left column -->
              <div class="col-md-6">
                <div class="form-group">
                  <div class="checkbox">
                    <label>
                      <input type="checkbox" ng-model="currentFolder.readOnly"> <span translate>Folder Master</span>
                    </label>
                    &nbsp;<a href="http://docs.syncthing.net/users/foldermaster.html" target="_blank"><span class="glyphicon glyphicon-book"></span>&nbsp;<span translate>Help</span></a>
                  </div>
                  <p translate class="help-block">Files are protected from changes made on other devices, but changes made on this device will be sent to the rest of the cluster.</p>
                </div>
                <div class="form-group">
                  <div class="checkbox">
                    <label>
                      <input type="checkbox" ng-model="currentFolder.ignorePerms"> <span translate>Ignore Permissions</span>
                    </label>
                  </div>
                  <p translate class="help-block">File permission bits are ignored when looking for changes. Use on FAT file systems.</p>
                </div>
              </div>

              <!-- Right column-->
              <div class="col-md-6">
                <div class="form-group">
                  <label translate>File Pull Order</label>
                  <select class="form-control" ng-model="currentFolder.order">
                    <option value="random" translate>Random</option>
                    <option value="alphabetic" translate>Alphabetic</option>
                    <option value="smallestFirst" translate>Smallest First</option>
                    <option value="largestFirst" translate>Largest First</option>
                    <option value="oldestFirst" translate>Oldest First</option>
                    <option value="newestFirst" translate>Newest First</option>
                  </select>
                </div>
                <div class="form-group">
                  <label translate>File Versioning</label>&emsp;<a href="http://docs.syncthing.net/users/versioning.html" target="_blank"><span class="glyphicon glyphicon-book"></span>&nbsp;<span translate>Help</span></a>
                  <select class="form-control" ng-model="currentFolder.fileVersioningSelector">
                    <option value="none" translate>No File Versioning</option>
                    <option value="trashcan" translate>Trash Can File Versioning</option>
                    <option value="simple" translate>Simple File Versioning</option>
                    <option value="staggered" translate>Staggered File Versioning</option>
                    <option value="external" translate>External File Versioning</option>
                  </select>
                </div>
                <div class="form-group" ng-if="currentFolder.fileVersioningSelector=='trashcan'" ng-class="{'has-error': folderEditor.trashcanClean.$invalid && folderEditor.trashcanClean.$dirty}">
                  <p translate class="help-block">Files are moved to .stversions folder when replaced or deleted by Syncthing.</p>
                  <label translate for="trashcanClean">Clean out after</label>
                  <div class="input-group">
                    <input name="trashcanClean" id="trashcanClean" class="form-control text-right" type="number" ng-model="currentFolder.trashcanClean" required min="0"></input>
                    <div class="input-group-addon">days</div>
                  </div>
                  <p class="help-block">
                    <span translate ng-if="folderEditor.trashcanClean.$valid || folderEditor.trashcanClean.$pristine">The number of days to keep files in the trash can. Zero means forever.</span>
                    <span translate ng-if="folderEditor.trashcanClean.$error.required && folderEditor.trashcanClean.$dirty">The number of days must be a number and cannot be blank.</span>
                    <span translate ng-if="folderEditor.trashcanClean.$error.min && folderEditor.trashcanClean.$dirty">A negative number of days doesn't make sense.</span>
                  </p>
                </div>
                <div class="form-group" ng-if="currentFolder.fileVersioningSelector=='simple'" ng-class="{'has-error': folderEditor.simpleKeep.$invalid && folderEditor.simpleKeep.$dirty}">
                  <p translate class="help-block">Files are moved to date stamped versions in a .stversions folder when replaced or deleted by Syncthing.</p>
                  <label translate for="simpleKeep">Keep Versions</label>
                  <input name="simpleKeep" id="simpleKeep" class="form-control" type="number" ng-model="currentFolder.simpleKeep" required min="1"></input>
                  <p class="help-block">
                    <span translate ng-if="folderEditor.simpleKeep.$valid || folderEditor.simpleKeep.$pristine">The number of old versions to keep, per file.</span>
                    <span translate ng-if="folderEditor.simpleKeep.$error.required && folderEditor.simpleKeep.$dirty">The number of versions must be a number and cannot be blank.</span>
                    <span translate ng-if="folderEditor.simpleKeep.$error.min && folderEditor.simpleKeep.$dirty">You must keep at least one version.</span>
                  </p>
                </div>
                <div class="form-group" ng-if="currentFolder.fileVersioningSelector=='staggered'" ng-class="{'has-error': folderEditor.staggeredMaxAge.$invalid && folderEditor.staggeredMaxAge.$dirty}">
                  <p class="help-block"><span translate>Files are moved to date stamped versions in a .stversions folder when replaced or deleted by Syncthing.</span> <span translate>Versions are automatically deleted if they are older than the maximum age or exceed the number of files allowed in an interval.</span></p>
                  <p translate class="help-block">The following intervals are used: for the first hour a version is kept every 30 seconds, for the first day a version is kept every hour, for the first 30 days a version is kept every day, until the maximum age a version is kept every week.</p>
                  <label translate for="staggeredMaxAge">Maximum Age</label>
                  <input name="staggeredMaxAge" id="staggeredMaxAge" class="form-control" type="number" ng-model="currentFolder.staggeredMaxAge" required></input>
                  <p class="help-block">
                    <span translate ng-if="folderEditor.staggeredMaxAge.$valid || folderEditor.staggeredMaxAge.$pristine">The maximum time to keep a version (in days, set to 0 to keep versions forever).</span>
                    <span translate ng-if="folderEditor.staggeredMaxAge.$error.required && folderEditor.staggeredMaxAge.$dirty">The maximum age must be a number and cannot be blank.</span>
                  </p>
                </div>
                <div class="form-group" ng-if="currentFolder.fileVersioningSelector == 'staggered'">
                  <label translate for="staggeredVersionsPath">Versions Path</label>
                  <input name="staggeredVersionsPath" id="staggeredVersionsPath" class="form-control" type="text" ng-model="currentFolder.staggeredVersionsPath"></input>
                  <p translate class="help-block">Path where versions should be stored (leave empty for the default .stversions folder in the folder).</p>
                </div>
                <div class="form-group" ng-if="currentFolder.fileVersioningSelector=='external'" ng-class="{'has-error': folderEditor.externalCommand.$invalid && folderEditor.externalCommand.$dirty}">
                  <p translate class="help-block">An external command handles the versioning. It has to remove the file from the synced folder.</p>
                  <label translate for="externalCommand">Command</label>
                  <input name="externalCommand" id="externalCommand" class="form-control" type="text" ng-model="currentFolder.externalCommand" required></input>
                  <p class="help-block">
                    <span translate ng-if="folderEditor.externalCommand.$valid || folderEditor.externalCommand.$pristine">The first command line parameter is the folder path and the second parameter is the relative path in the folder.</span>
                    <span translate ng-if="folderEditor.externalCommand.$error.required  && folderEditor.externalCommand.$dirty">The path cannot be blank.</span>
                  </p>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-md-12">
                <div class="form-group">
                  <label translate for="devices">Share With Devices</label>
                  <p translate class="help-block">Select the devices to share this folder with.</p>
                  <div class="container-fluid">
                    <div class="row" ng-repeat="deviceGroup in otherDevices() | group:3">
                      <div class="checkbox col-md-4" ng-repeat="device in deviceGroup">
                        <label>
                          <input type="checkbox" ng-model="currentFolder.selectedDevices[device.deviceID]"> {{deviceName(device)}}
                        </label>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

          </form>
          <div translate ng-show="!editingExisting">When adding a new folder, keep in mind that the Folder ID is used to tie folders together between devices. They are case sensitive and must match exactly between all devices.</div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary btn-sm" ng-click="saveFolder()" ng-disabled="folderEditor.$invalid"><span class="glyphicon glyphicon-ok"></span>&nbsp;<span translate>Save</span></button>
          <button type="button" class="btn btn-default btn-sm" data-dismiss="modal"><span class="glyphicon glyphicon-remove"></span>&nbsp;<span translate>Close</span></button>
          <button ng-if="editingExisting" type="button" class="btn btn-danger pull-left btn-sm" ng-click="deleteFolder()"><span class="glyphicon glyphicon-minus"></span>&nbsp;<span translate>Delete</span></button>
          <button id="editIgnoresButton" ng-if="editingExisting" type="button" class="btn btn-default pull-left btn-sm" ng-click="editIgnores()"><span class="glyphicon glyphicon-eye-close"></span>&nbsp;<span translate>Ignore Patterns</span></button>
        </div>
      </div>
    </div>
  </div>

  <!-- Ignores editor modal -->

  <div id="editIgnores" class="modal fade" tabindex="-1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title" translate>Ignore Patterns</h4>
        </div>
        <div class="modal-body">
          <p translate>Enter ignore patterns, one per line.</p>
          <textarea class="form-control" rows="15"></textarea>

          <hr/>

          <p class="small"><span translate>Quick guide to supported patterns</span> (<a href="http://docs.syncthing.net/users/ignoring.html" target="_blank" translate>full documentation</a>):</p>
          <dl class="dl-horizontal dl-narrow small">
            <dt><code>!</code></dt> <dd><span translate>Inversion of the given condition (i.e. do not exclude)</span></dd>
            <dt><code>*</code></dt> <dd><span translate>Single level wildcard (matches within a directory only)</span></dd>
            <dt><code>**</code></dt> <dd><span translate>Multi level wildcard (matches multiple directory levels)</span></dd>
            <dt><code>//</code></dt> <dd><span translate>Comment, when used at the start of a line</span></dd>
          </dl>
        </div>
        <div class="modal-footer">
          <div class="pull-left"><span translate>Editing</span> <code>{{currentFolder.path}}{{system.pathSeparator}}.stignore</code></div>
          <button type="button" class="btn btn-primary btn-sm" data-dismiss="modal" ng-click="saveIgnores()"><span class="glyphicon glyphicon-ok"></span>&nbsp;<span translate>Save</span></button>
          <button type="button" class="btn btn-default btn-sm" data-dismiss="modal"><span class="glyphicon glyphicon-remove"></span>&nbsp;<span translate>Close</span></button>
        </div>
      </div>
    </div>
  </div>

  <!-- Settings modal -->

  <div id="settings" class="modal fade" tabindex="-1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h4 translate class="modal-title">Settings</h4>
        </div>
        <div class="modal-body">
          <form role="form">
            <div class="row">

              <div class="col-md-6">
                <div class="form-group">
                  <label translate for="DeviceName">Device Name</label>
                  <input id="DeviceName" class="form-control" type="text" ng-model="tmpOptions.deviceName">
                </div>
                <div class="form-group">
                  <label translate for="ListenAddressStr">Sync Protocol Listen Addresses</label>
                  <input id="ListenAddressStr" class="form-control" type="text" ng-model="tmpOptions._listenAddressStr">
                </div>
                <div class="form-group">
                  <label translate for="MaxRecvKbps">Incoming Rate Limit (KiB/s)</label>
                  <input id="MaxRecvKbps" class="form-control" type="number" ng-model="tmpOptions.maxRecvKbps">
                </div>
                <div class="form-group">
                  <label translate for="MaxSendKbps">Outgoing Rate Limit (KiB/s)</label>
                  <input id="MaxSendKbps" class="form-control" type="number" ng-model="tmpOptions.maxSendKbps">
                </div>
                <div class="col-md-6">
                  <div class="form-group">
                    <div class="checkbox">
                      <label>
                        <input id="UPnPEnabled" type="checkbox" ng-model="tmpOptions.upnpEnabled"> <span translate>Enable UPnP</span>
                      </label>
                    </div>
                  </div>
                  <div class="form-group">
                    <div class="checkbox">
                      <label>
                        <input id="GlobalAnnEnabled" type="checkbox" ng-model="tmpOptions.globalAnnounceEnabled"> <span translate>Global Discovery</span>
                      </label>
                    </div>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-group">
                    <div class="checkbox">
                      <label ng-if="upgradeInfo">
                        <input id="AutoUpgradeEnabled" type="checkbox" ng-model="tmpOptions.autoUpgradeEnabled"> <span translate>Automatic upgrades</span>
                      </label>
                    </div>
                  </div>
                  <div class="form-group">
                    <div class="checkbox">
                      <label>
                        <input id="LocalAnnEnabled" type="checkbox" ng-model="tmpOptions.localAnnounceEnabled"> <span translate>Local Discovery</span>
                      </label>
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label translate for="GlobalAnnServersStr">Global Discovery Server</label>
                  <input ng-disabled="!tmpOptions.globalAnnounceEnabled" id="GlobalAnnServersStr" class="form-control" type="text" ng-model="tmpOptions._globalAnnounceServersStr">
                </div>
              </div>

              <div class="col-md-6">
                <div class="form-group">
                  <label translate for="Address">GUI Listen Addresses</label>
                  <input id="Address" class="form-control" type="text" ng-model="tmpGUI.address">
                </div>
                <div class="form-group">
                  <label translate for="User">GUI Authentication User</label>
                  <input id="User" class="form-control" type="text" ng-model="tmpGUI.user">
                </div>
                <div class="form-group">
                  <label translate for="Password">GUI Authentication Password</label>
                  <input id="Password" class="form-control" type="password" ng-model="tmpGUI.password">
                </div>
                <div class="form-group">
                  <div class="checkbox">
                    <label>
                      <input id="UseTLS" type="checkbox" ng-model="tmpGUI.useTLS"> <span translate>Use HTTPS for GUI</span>
                    </label>
                  </div>
                </div>
                <div class="form-group">
                  <div class="checkbox">
                    <label>
                      <input id="StartBrowser" type="checkbox" ng-model="tmpOptions.startBrowser"> <span translate>Start Browser</span>
                    </label>
                  </div>
                </div>
                <div class="form-group">
                  <div class="checkbox">
                    <label>
                      <input id="UREnabled" type="checkbox" ng-model="tmpOptions.urEnabled"> <span translate>Anonymous Usage Reporting</span> (<a translate ng-click="showURPreview()" href="#">Preview</a>)
                    </label>
                  </div>
                </div>

                <hr />

                <div class="form-group">
                  <label><span translate>API Key</span></label>
                  <div class="well well-sm text-monospace">{{tmpGUI.apiKey || "-"}}</div>
                  <button translate type="button" class="btn btn-sm btn-default" ng-click="setAPIKey(tmpGUI)">Generate</button>
                </div>
              </div>

            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary btn-sm" ng-click="saveSettings()"><span class="glyphicon glyphicon-ok"></span>&nbsp;<span translate>Save</span></button>
          <button type="button" class="btn btn-default btn-sm" data-dismiss="modal"><span class="glyphicon glyphicon-remove"></span>&nbsp;<span translate>Close</span></button>
        </div>
      </div>
    </div>
  </div>

  <!-- Usage report modal -->

  <div id="ur" class="modal fade" data-backdrop="static" data-keyboard="false" tabindex="-1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header alert alert-success">
          <h4 translate class="modal-title">Allow Anonymous Usage Reporting?</h4>
        </div>
        <div class="modal-body">
          <p translate>The encrypted usage report is sent daily. It is used to track common platforms, folder sizes and app versions. If the reported data set is changed you will be prompted with this dialog again.</p>
          <p translate translate-value-url="<a href=&quot;https://data.syncthing.net&quot; target=&quot;_blank&quot;>https://data.syncthing.net</a>">The aggregated statistics are publicly available at {%url%}.</p>
          <button translate type="button" class="btn btn-default btn-sm" ng-show="!reportPreview" ng-click="showReportPreview()">Preview Usage Report</button>
          <pre ng-if="reportPreview"><small>{{reportData | json}}</small></pre>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-success btn-sm" ng-click="acceptUR()"><span class="glyphicon glyphicon-ok"></span>&nbsp;<span translate>Yes</span></button>
          <button type="button" class="btn btn-danger btn-sm" ng-click="declineUR()"><span class="glyphicon glyphicon-remove"></span>&nbsp;<span translate>No</span></button>
        </div>
      </div>
    </div>
  </div>

  <!-- Usage report preview modal -->

  <div id="urPreview" class="modal fade" tabindex="-1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header alert alert-success">
          <h4 translate class="modal-title">Anonymous Usage Reporting</h4>
        </div>
        <div class="modal-body">
          <p translate>The encrypted usage report is sent daily. It is used to track common platforms, folder sizes and app versions. If the reported data set is changed you will be prompted with this dialog again.</p>
          <p translate translate-value-url="<a href=&quot;https://data.syncthing.net&quot; target=&quot;_blank&quot;>https://data.syncthing.net</a>">The aggregated statistics are publicly available at {%url%}.</p>
          <pre><small>{{reportData | json}}</small></pre>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-success btn-sm" data-dismiss="modal"><span class="glyphicon glyphicon-ok"></span>&nbsp;<span translate>OK</span></button>
        </div>
      </div>
    </div>
  </div>

  <!-- Needed files modal -->

  <modal id="needed" large="yes" status="info" icon="cloud-download" close="yes" title="{{'Out of Sync Items' | translate}}">
    <div class="progress">
      <div class="progress-bar progress-bar-success" style="width: 20%"><span translate class="show">Reused</span></div>
      <div class="progress-bar" style="width: 20%"><span translate class="show">Copied from original</span></div>
      <div class="progress-bar progress-bar-info" style="width: 20%"><span translate class="show">Copied from elsewhere</span></div>
      <div class="progress-bar progress-bar-warning" style="width: 20%"><span translate class="show">Downloaded</span></div>
      <div class="progress-bar progress-bar-danger progress-bar-striped active" style="width: 20%"><span translate class="show">Downloading</span></div>
    </div>

    <hr/>

    <table class="table table-striped table-condensed">

      <tr dir-paginate="f in needed | itemsPerPage: neededPageSize" current-page="neededCurrentPage" total-items="neededTotal" pagination-id="needed">
        <!-- Icon -->
        <td class="small-data"><span class="glyphicon glyphicon-{{needIcons[f.action]}}"></span> {{needActions[f.action]}}</td>

        <!-- Name -->
        <td ng-if="f.type != 'queued'" title="{{f.name}}">{{f.name | basename}}</td>
        <td ng-if="f.type == 'queued'">
          <a href="" ng-click="bumpFile(neededFolder, f.name)" title="{{'Move to top of queue' | translate}}">
            <span class="glyphicon glyphicon-eject"></span>
          </a>
          <span title="{{f.name}}">&nbsp;{{f.name | basename}}</span>
        </td>

        <!-- Size/Progress -->
        <td ng-if="f.type == 'progress' && f.action == 'sync' && progress[neededFolder] && progress[neededFolder][f.name]">
          <div class="progress">
            <div class="progress-bar progress-bar-success" style="width: {{progress[neededFolder][f.name].reused}}%"></div>
            <div class="progress-bar" style="width: {{progress[neededFolder][f.name].copiedFromOrigin}}%"></div>
            <div class="progress-bar progress-bar-info" style="width: {{progress[neededFolder][f.name].copiedFromElsewhere}}%"></div>
            <div class="progress-bar progress-bar-warning" style="width: {{progress[neededFolder][f.name].pulled}}%"></div>
            <div class="progress-bar progress-bar-danger progress-bar-striped active" style="width: {{progress[neededFolder][f.name].pulling}}%"></div>
            <span class="show frontal">
              {{progress[neededFolder][f.name].bytesDone | binary}}B / {{progress[neededFolder][f.name].bytesTotal | binary}}B
            </span>
          </div>
        </td>
        <td class="text-right small-data" ng-if="f.type != 'progress' || f.action != 'sync' || !progress[neededFolder] || !progress[neededFolder][f.name]">
          <span ng-if="f.size > 0">{{f.size | binary}}B</span>
        </td>

      </tr>
    </table>

    <dir-pagination-controls on-page-change="neededPageChanged(newPageNumber)" pagination-id="needed"></dir-pagination-controls>
    <ul class="pagination pull-right">
      <li ng-repeat="option in [10, 25, 50]" ng-class="{ active: neededPageSize == option }">
        <a href="#" ng-click="neededChangePageSize(option)">{{option}}</a>
      <li>
    </ul>
    <div class="clearfix"></div>
  </modal>

  <!-- Failed Items modal -->

  <modal id="failed" large="yes" status="warning" icon="exclamation-sign" close="yes" title="{{'Failed Items' | translate}}">
    <p>
      <span translate>The following items could not be synchronized.</span>
      <span translate>They are retried automatically and will be synced when the error is resolved.</span>
    </p>
    <table class="table table-striped table-condensed">
      <tr dir-paginate="e in failedCurrent | itemsPerPage: failedPageSize" current-page="failedCurrentPage" pagination-id="failed">
        <td><abbr title="{{e.path}}">{{e.path | basename}}</abbr></td>
        <td><abbr title="{{e.error}}">{{e.error | lastErrorComponent}}</abbr></td>
      </tr>
    </table>
    <dir-pagination-controls on-page-change="failedPageChanged(newPageNumber)" pagination-id="failed"></dir-pagination-controls>
    <ul class="pagination pull-right">
      <li ng-repeat="option in [10, 25, 50]" ng-class="{ active: failedPageSize == option }">
        <a href="#" ng-click="failedChangePageSize(option)">{{option}}</a>
      <li>
    </ul>
    <div class="clearfix"></div>
  </modal>

  <!-- About modal -->

  <modal id="about" large="yes" close="yes" status="info" title="{{'About' | translate}}">
    <h1 class="text-center"><img alt="Syncthing" title="Syncthing" src="assets/img/logo-horizontal.svg" style="vertical-align: -16px" height="100" width="366"/><br/><small>{{versionString()}}</small></h1>
    <hr/>

    <p translate>Copyright &copy; 2015 the following Contributors:</p>
    <div class="row">
      <div class="col-md-12">
        <ul class="list-unstyled three-columns" id="contributor-list">
          <li class="auto-generated">Aaron Bieber</li>
          <li class="auto-generated">Alexander Graf</li>
          <li class="auto-generated">Andrew Dunham</li>
          <li class="auto-generated">Antony Male</li>
          <li class="auto-generated">Arthur Axel fREW Schmidt</li>
          <li class="auto-generated">Audrius Butkevicius</li>
          <li class="auto-generated">Bart De Vries</li>
          <li class="auto-generated">Ben Curthoys</li>
          <li class="auto-generated">Ben Schulz</li>
          <li class="auto-generated">Ben Sidhom</li>
          <li class="auto-generated">Brandon Philips</li>
          <li class="auto-generated">Brendan Long</li>
          <li class="auto-generated">Caleb Callaway</li>
          <li class="auto-generated">Carsten Hagemann</li>
          <li class="auto-generated">Cathryne Linenweaver</li>
          <li class="auto-generated">Chris Howie</li>
          <li class="auto-generated">Chris Joel</li>
          <li class="auto-generated">Colin Kennedy</li>
          <li class="auto-generated">Daniel Bergmann</li>
          <li class="auto-generated">Daniel Martí</li>
          <li class="auto-generated">Dennis Wilson</li>
          <li class="auto-generated">Dominik Heidler</li>
          <li class="auto-generated">Elias Jarlebring</li>
          <li class="auto-generated">Emil Hessman</li>
          <li class="auto-generated">Erik Meitner</li>
          <li class="auto-generated">Federico Castagnini</li>
          <li class="auto-generated">Felix Ableitner</li>
          <li class="auto-generated">Felix Unterpaintner</li>
          <li class="auto-generated">Francois-Xavier Gsell</li>
          <li class="auto-generated">Frank Isemann</li>
          <li class="auto-generated">Gilli Sigurdsson</li>
          <li class="auto-generated">Jakob Borg</li>
          <li class="auto-generated">James Patterson</li>
          <li class="auto-generated">Jaroslav Malec</li>
          <li class="auto-generated">Jens Diemer</li>
          <li class="auto-generated">Jochen Voss</li>
          <li class="auto-generated">Johan Vromans</li>
          <li class="auto-generated">Karol Różycki</li>
          <li class="auto-generated">Ken'ichi Kamada</li>
          <li class="auto-generated">Lode Hoste</li>
          <li class="auto-generated">Lord Landon Agahnim</li>
          <li class="auto-generated">Marc Laporte</li>
          <li class="auto-generated">Marc Pujol</li>
          <li class="auto-generated">Marcin Dziadus</li>
          <li class="auto-generated">Michael Jephcote</li>
          <li class="auto-generated">Michael Tilli</li>
          <li class="auto-generated">Pascal Jungblut</li>
          <li class="auto-generated">Peter Hoeg</li>
          <li class="auto-generated">Philippe Schommers</li>
          <li class="auto-generated">Phill Luby</li>
          <li class="auto-generated">Piotr Bejda</li>
          <li class="auto-generated">Ryan Sullivan</li>
          <li class="auto-generated">Sergey Mishin</li>
          <li class="auto-generated">Stefan Tatschner</li>
          <li class="auto-generated">Tim Abell</li>
          <li class="auto-generated">Tobias Nygren</li>
          <li class="auto-generated">Tomas Cerveny</li>
          <li class="auto-generated">Tully Robinson</li>
          <li class="auto-generated">Veeti Paananen</li>
          <li class="auto-generated">Vil Brekin</li>
        </ul>
      </div>
    </div>
    <hr/>

    <p translate>Syncthing includes the following software or portions thereof:</p>
    <ul class="list-unstyled two-columns">
      <li><a href="http://golang.org/">The Go Programming Language</a>, Copyright &copy; 2012 The Go Authors.</li>
      <li><a href="https://bitbucket.org/kardianos/osext">kardianos/osext</a>, Copyright &copy; 2012 Daniel Theophanes.</li>
      <li><a href="https://code.google.com/p/snappy-go/">snappy-go</a>, Copyright &copy; 2011 The Snappy-Go Authors.</li>
      <li><a href="https://github.com/golang/groupcache">groupcache/lru</a>, Copyright &copy; 2013 Google Inc.</li>
      <li><a href="https://github.com/juju/ratelimit">juju/ratelimit</a>, Copyright &copy; 2014 Canonical Ltd.</li>
      <li><a href="https://github.com/syndtr/goleveldb">syndtr/goleveldb</a>, Copyright &copy; 2012, Suryandaru Triandana</li>
      <li><a href="https://github.com/vitrun/qart">vitrun/qart</a>, Copyright &copy; The Go Authors.</li>
      <li><a href="https://angularjs.org/">AngularJS</a>, Copyright &copy; 2010-2014 Google, Inc.</li>
      <li><a href="http://getbootstrap.com/">Bootstrap</a>, Copyright &copy; 2011-2014 Twitter, Inc.</li>
    </ul>
  </modal>

  <!-- Advanced modal -->

  <div id="advanced" class="modal fade" tabindex="-1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header alert alert-danger">
          <h4 translate class="modal-title">Advanced Configuration</h4>
        </div>
        <div class="modal-body">

          <p class="text-danger">
            <b translate>Be careful!</b>
            <span translate>Incorrect configuration may damage your folder contents and render Syncthing inoperable.</span>
          </p>

          <div class="panel-group" id="advancedAccordion" role="tablist" aria-multiselectable="true">

            <div class="panel panel-default">
              <div class="panel-heading" role="tab" id="guiHeading" data-toggle="collapse" data-parent="#advancedAccordion" href="#guiConfig" aria-expanded="true" aria-controls="guiConfig" style="cursor: pointer">
                <h4 class="panel-title" translate>GUI</h4>
              </div>
              <div id="guiConfig" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="guiHeading">
                <div class="panel-body">
                  <form class="form-horizontal" role="form">
                    <div ng-repeat="(key, value) in config.gui" ng-init="type = inputTypeFor(key, value)" ng-if="type != 'skip'" class="form-group">
                      <label for="guiInput{{$index}}" class="col-sm-4 control-label">{{key}}</label>
                      <div class="col-sm-8">
                        <input id="guiInput{{$index}}" class="form-control" type="{{type}}" ng-model="config.gui[key]" />
                      </div>
                    </div>
                  </form>
                </div>
              </div>
            </div>

            <div class="panel panel-default">
              <div class="panel-heading" role="tab" id="optionsHeading" data-toggle="collapse" data-parent="#advancedAccordion" href="#optionsConfig" aria-expanded="true" aria-controls="optionsConfig" style="cursor: pointer">
                <h4 class="panel-title" translate>Options</h4>
              </div>
              <div id="optionsConfig" class="panel-collapse collapse" role="tabpanel" aria-labelledby="optionsHeading">
                <div class="panel-body">
                  <form class="form-horizontal" role="form">
                    <div ng-repeat="(key, value) in config.options" ng-if="inputTypeFor(key, value) != 'skip'" class="form-group">
                      <label for="optionsInput{{$index}}" class="col-sm-4 control-label">{{key}}</label>
                      <div class="col-sm-8">
                        <input id="optionsInput{{$index}}" class="form-control" type="{{inputTypeFor(key, value)}}" ng-model="config.options[key]" />
                      </div>
                    </div>
                  </form>
                </div>
              </div>
            </div>

            <div class="panel panel-default" ng-repeat="(folder, _) in folders">
              <div class="panel-heading" role="tab" id="folder{{folder}}Heading"  data-toggle="collapse" data-parent="#advancedAccordion" href="#folder{{folder}}Config" aria-expanded="true" aria-controls="folder{{folder}}Config" style="cursor: pointer">
                <h4 class="panel-title">
                  <span translate>Folder</span> "{{folder}}"
                </h4>
              </div>
              <div id="folder{{folder}}Config" class="panel-collapse collapse" role="tabpanel" aria-labelledby="folder{{folder}}Heading">
                <div class="panel-body">
                  <form class="form-horizontal" role="form">
                    <div ng-repeat="(key, value) in folders[folder]" ng-if="inputTypeFor(key, value) != 'skip'" class="form-group">
                      <label for="foldre{{folder}}Input{{$index}}" class="col-sm-4 control-label">{{key}}</label>
                      <div class="col-sm-8">
                        <input id="folder{{folder}}Input{{$index}}" class="form-control" type="{{inputTypeFor(key, value)}}" ng-model="folders[folder][key]" />
                      </div>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>

          <div class="modal-footer">
            <button type="button" class="btn btn-primary btn-sm" ng-click="saveAdvanced()"><span class="glyphicon glyphicon-ok"></span>&nbsp;<span translate>Save</span></button>
            <button type="button" class="btn btn-default btn-sm" data-dismiss="modal"><span class="glyphicon glyphicon-remove"></span>&nbsp;<span translate>Close</span></button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- vendor scripts -->
  <script src="vendor/jquery/jquery-2.0.3.min.js"></script>
  <script src="vendor/angular/angular.min.js"></script>
  <script src="vendor/angular/angular-translate.min.js"></script>
  <script src="vendor/angular/angular-translate-loader.min.js"></script>
  <script src="vendor/angular/angular-dirPagination.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.min.js"></script>
  <!-- / vendor scripts -->

  <!-- gui application code -->
  <script src="scripts/syncthing/core/module.js"></script>
  <script src="scripts/syncthing/core/services/events.js"></script>
  <script src="scripts/syncthing/core/controllers/syncthingController.js"></script>
  <script src="scripts/syncthing/core/directives/identiconDirective.js"></script>
  <script src="scripts/syncthing/core/directives/languageSelectDirective.js"></script>
  <script src="scripts/syncthing/core/directives/modalDirective.js"></script>
  <script src="scripts/syncthing/core/directives/uniqueFolderDirective.js"></script>
  <script src="scripts/syncthing/core/directives/validDeviceidDirective.js"></script>
  <script src="scripts/syncthing/core/directives/popoverDirective.js"></script>
  <script src="scripts/syncthing/core/directives/selectOnClickDirective.js"></script>
  <script src="scripts/syncthing/core/filters/alwaysNumberFilter.js"></script>
  <script src="scripts/syncthing/core/filters/basenameFilter.js"></script>
  <script src="scripts/syncthing/core/filters/binaryFilter.js"></script>
  <script src="scripts/syncthing/core/filters/durationFilter.js"></script>
  <script src="scripts/syncthing/core/filters/groupFilter.js"></script>
  <script src="scripts/syncthing/core/filters/naturalFilter.js"></script>
  <script src="scripts/syncthing/core/filters/lastErrorComponentFilter.js"></script>
  <script src="scripts/syncthing/core/services/filterStabilize.js"></script>
  <script src="scripts/syncthing/core/services/localeService.js"></script>
  <script src="scripts/syncthing/core/services/memoize.js"></script>

  <script src="assets/lang/valid-langs.js"></script>
  <script src="assets/lang/prettyprint.js"></script>
  <script src="scripts/syncthing/app.js"></script>
  <!-- / gui application code -->

</body>
</html>
