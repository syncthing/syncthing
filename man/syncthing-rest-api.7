.\" Man page generated from reStructuredText.
.
.TH "SYNCTHING-REST-API" "7" "Jan 11, 2021" "v1" "Syncthing"
.SH NAME
syncthing-rest-api \- REST API
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.sp
Syncthing exposes a REST interface over HTTP on the GUI port. This is used by
the GUI (from Javascript) and can be used by other processes wishing to control
Syncthing. In most cases both the input and output data is in JSON format. The
interface is subject to change.
.SH API KEY
.sp
To use the REST API an API key must be set and used. The API key can be
generated in the GUI, or set in the \fBconfiguration/gui/apikey\fP element in
the configuration file. To use an API key, set the request header
\fBX\-API\-Key\fP to the API key value. For example, \fBcurl \-X POST \-H
"X\-API\-Key: abc123" http://localhost:8384/rest/...\fP can be used to invoke
with \fBcurl\fP (add \fB\-k\fP flag when using HTTPS with a Syncthing generated or self signed certificate).
.SH SYSTEM ENDPOINTS
.SS GET /rest/system/browse
.sp
Returns a list of directories matching the path given by the optional parameter
\fBcurrent\fP\&. The path can use \fI\%patterns as described in Go’s filepath package\fP <\fBhttps://golang.org/pkg/path/filepath/#Match\fP>\&. A ‘*’ will always be appended
to the given path (e.g. \fB/tmp/\fP matches all its subdirectories). If the option
\fBcurrent\fP is not given, filesystem root paths are returned.
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
$ curl \-H "X\-API\-Key: yourkey" localhost:8384/rest/system/browse | json_pp
[
    "/"
]

$ curl \-H "X\-API\-Key: yourkey" localhost:8384/rest/system/browse?current=/var/ | json_pp
[
    "/var/backups/",
    "/var/cache/",
    "/var/lib/",
    "/var/local/",
    "/var/lock/",
    "/var/log/",
    "/var/mail/",
    "/var/opt/",
    "/var/run/",
    "/var/spool/",
    "/var/tmp/"
]

$ curl \-H "X\-API\-Key: yourkey" localhost:8384/rest/system/browse?current=/var/*o | json_pp
[
    "/var/local/",
    "/var/lock/",
    "/var/log/",
    "/var/opt/",
    "/var/spool/"
]
.ft P
.fi
.UNINDENT
.UNINDENT
.SS GET /rest/system/config
.sp
Deprecated since version v1.12.0: This endpoint still works as before but is deprecated. Use rest\-config
instead.

.sp
Returns the current configuration.
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
{
  "version": 30,
  "folders": [
    {
      "id": "GXWxf\-3zgnU",
      "label": "MyFolder",
      "filesystemType": "basic",
      "path": "...",
      "type": "sendreceive",
      "devices": [
        {
          "deviceID": "...",
          "introducedBy": ""
        }
      ],
      "rescanIntervalS": 60,
      "fsWatcherEnabled": false,
      "fsWatcherDelayS": 10,
      "ignorePerms": false,
      "autoNormalize": true,
      "minDiskFree": {
        "value": 1,
        "unit": "%"
      },
      "versioning": {
        "type": "simple",
        "params": {
          "keep": "5"
        }
      },
      "copiers": 0,
      "pullerMaxPendingKiB": 0,
      "hashers": 0,
      "order": "random",
      "ignoreDelete": false,
      "scanProgressIntervalS": 0,
      "pullerPauseS": 0,
      "maxConflicts": 10,
      "disableSparseFiles": false,
      "disableTempIndexes": false,
      "paused": false,
      "weakHashThresholdPct": 25,
      "markerName": ".stfolder",
      "copyOwnershipFromParent": false,
      "modTimeWindowS": 0
    }
  ],
  "devices": [
    {
      "deviceID": "...",
      "name": "Laptop",
      "addresses": [
        "dynamic",
        "tcp://192.168.1.2:22000"
      ],
      "compression": "metadata",
      "certName": "",
      "introducer": false,
      "skipIntroductionRemovals": false,
      "introducedBy": "",
      "paused": false,
      "allowedNetworks": [],
      "autoAcceptFolders": false,
      "maxSendKbps": 0,
      "maxRecvKbps": 0,
      "ignoredFolders": [],
      "maxRequestKiB": 0
    }
  ],
  "gui": {
    "enabled": true,
    "address": "127.0.0.1:8384",
    "user": "Username",
    "password": "$2a$10$ZFws69T4FlvWwsqeIwL.TOo5zOYqsa/.TxlUnsGYS.j3JvjFTmxo6",
    "authMode": "static",
    "useTLS": false,
    "apiKey": "pGahcht56664QU5eoFQW6szbEG6Ec2Cr",
    "insecureAdminAccess": false,
    "theme": "default",
    "debugging": false,
    "insecureSkipHostcheck": false,
    "insecureAllowFrameLoading": false
  },
  "ldap": {
    "address": "",
    "bindDN": "",
    "transport": "plain",
    "insecureSkipVerify": false
  },
  "options": {
    "listenAddresses": [
      "default"
    ],
    "globalAnnounceServers": [
      "default"
    ],
    "globalAnnounceEnabled": true,
    "localAnnounceEnabled": true,
    "localAnnouncePort": 21027,
    "localAnnounceMCAddr": "[ff12::8384]:21027",
    "maxSendKbps": 0,
    "maxRecvKbps": 0,
    "reconnectionIntervalS": 60,
    "relaysEnabled": true,
    "relayReconnectIntervalM": 10,
    "startBrowser": false,
    "natEnabled": true,
    "natLeaseMinutes": 60,
    "natRenewalMinutes": 30,
    "natTimeoutSeconds": 10,
    "urAccepted": \-1,
    "urSeen": 2,
    "urUniqueId": "",
    "urURL": "https://data.syncthing.net/newdata",
    "urPostInsecurely": false,
    "urInitialDelayS": 1800,
    "restartOnWakeup": true,
    "autoUpgradeIntervalH": 12,
    "upgradeToPreReleases": false,
    "keepTemporariesH": 24,
    "cacheIgnoredFiles": false,
    "progressUpdateIntervalS": 5,
    "limitBandwidthInLan": false,
    "minHomeDiskFree": {
      "value": 1,
      "unit": "%"
    },
    "releasesURL": "https://upgrades.syncthing.net/meta.json",
    "alwaysLocalNets": [],
    "overwriteRemoteDeviceNamesOnConnect": false,
    "tempIndexMinBlocks": 10,
    "unackedNotificationIDs": [],
    "trafficClass": 0,
    "defaultFolderPath": "~",
    "setLowPriority": true,
    "maxFolderConcurrency": 0,
    "crURL": "https://crash.syncthing.net/newcrash",
    "crashReportingEnabled": true,
    "stunKeepaliveStartS": 180,
    "stunKeepaliveMinS": 20,
    "stunServers": [
      "default"
    ],
    "databaseTuning": "auto",
    "maxConcurrentIncomingRequestKiB": 0
  },
  "remoteIgnoredDevices": []
}
.ft P
.fi
.UNINDENT
.UNINDENT
.SS GET /rest/system/config/insync
.sp
Deprecated since version v1.12.0: This endpoint still works as before but is deprecated. Use
rest\-config\-insync instead.

.sp
Returns whether the config is in sync, i.e. whether the running
configuration is the same as that on disk.
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
{
  "configInSync": true
}
.ft P
.fi
.UNINDENT
.UNINDENT
.SS POST /rest/system/config
.sp
Deprecated since version v1.12.0: This endpoint still works as before but is deprecated. Use rest\-config
instead.

.sp
Post the full contents of the configuration, in the same format as returned by
the corresponding GET request. When posting the configuration succeeds,
the posted configuration is immediately applied, except for changes that require a restart. Query
rest\-config\-insync to check if a restart is required.
.sp
This endpoint is the main point to control Syncthing, even if the change only
concerns a very small part of the config: The usual workflow is to get the
config, modify the needed parts and post it again.
.SS GET /rest/system/connections
.sp
\fBNOTE:\fP
.INDENT 0.0
.INDENT 3.5
Return format changed in 0.13.0.
.UNINDENT
.UNINDENT
.sp
Returns the list of configured devices and some metadata associated
with them. The list also contains the local device itself as not connected.
.sp
The connection types are \fBTCP (Client)\fP, \fBTCP (Server)\fP, \fBRelay (Client)\fP and \fBRelay (Server)\fP\&.
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
{
   "total" : {
          "paused" : false,
          "clientVersion" : "",
          "at" : "2015\-11\-07T17:29:47.691637262+01:00",
          "connected" : false,
          "inBytesTotal" : 1479,
          "type" : "",
          "outBytesTotal" : 1318,
          "address" : ""
   },
   "connections" : {
          "YZJBJFX\-RDBL7WY\-6ZGKJ2D\-4MJB4E7\-ZATSDUY\-LD6Y3L3\-MLFUYWE\-AEMXJAC" : {
             "connected" : true,
             "inBytesTotal" : 556,
             "paused" : false,
             "at" : "2015\-11\-07T17:29:47.691548971+01:00",
             "clientVersion" : "v0.12.1",
             "address" : "127.0.0.1:22002",
             "type" : "TCP (Client)",
             "outBytesTotal" : 550
          },
          "DOVII4U\-SQEEESM\-VZ2CVTC\-CJM4YN5\-QNV7DCU\-5U3ASRL\-YVFG6TH\-W5DV5AA" : {
             "outBytesTotal" : 0,
             "type" : "",
             "address" : "",
             "at" : "0001\-01\-01T00:00:00Z",
             "clientVersion" : "",
             "paused" : false,
             "inBytesTotal" : 0,
             "connected" : false
          },
          "UYGDMA4\-TPHOFO5\-2VQYDCC\-7CWX7XW\-INZINQT\-LE4B42N\-4JUZTSM\-IWCSXA4" : {
             "address" : "",
             "type" : "",
             "outBytesTotal" : 0,
             "connected" : false,
             "inBytesTotal" : 0,
             "paused" : false,
             "at" : "0001\-01\-01T00:00:00Z",
             "clientVersion" : ""
          }
   }
}
.ft P
.fi
.UNINDENT
.UNINDENT
.SS GET /rest/system/debug
.sp
New in version 0.12.0.

.sp
Returns the set of debug facilities and which of them are currently enabled.
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
{
  "enabled": [
    "beacon"
  ],
  "facilities": {
    "beacon": "Multicast and broadcast discovery",
    "config": "Configuration loading and saving",
    "connections": "Connection handling",
    "db": "The database layer",
    "dialer": "Dialing connections",
    "discover": "Remote device discovery",
    "events": "Event generation and logging",
    "http": "REST API",
    "main": "Main package",
    "model": "The root hub",
    "protocol": "The BEP protocol",
    "relay": "Relay connection handling",
    "scanner": "File change detection and hashing",
    "stats": "Persistent device and folder statistics",
    "sync": "Mutexes",
    "upgrade": "Binary upgrades",
    "upnp": "UPnP discovery and port mapping",
    "versioner": "File versioning"
  }
}
.ft P
.fi
.UNINDENT
.UNINDENT
.SS POST /rest/system/debug
.sp
New in version 0.12.0.

.sp
Enables or disables debugging for specified facilities. Give one or both of
\fBenable\fP and \fBdisable\fP query parameters, with comma separated facility
names. To disable debugging of the beacon and discovery packages, and enable it
for config and db:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
$ curl \-H X\-API\-Key:abc123 \-X POST \(aqhttp://localhost:8384/rest/system/debug?disable=beacon,discovery&enable=config,db\(aq
.ft P
.fi
.UNINDENT
.UNINDENT
.SS GET /rest/system/discovery
.sp
Returns the contents of the local discovery cache.
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
{
  "LGFPDIT7SKNNJVJZA4FC7QNCRKCE753K72BW5QD2FOZ7FRFEP57Q": [
    "192.162.129.11:22000"
  ]
}
.ft P
.fi
.UNINDENT
.UNINDENT
.SS POST /rest/system/discovery
.sp
\fBNOTE:\fP
.INDENT 0.0
.INDENT 3.5
Removed in v0.12.0.
.UNINDENT
.UNINDENT
.sp
Post with the query parameters \fBdevice\fP and \fBaddr\fP to add entries to
the discovery cache.
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
curl \-X POST http://127.0.0.1:8384/rest/system/discovery?device=LGFPDIT7SKNNJVJZA4FC7QNCRKCE753K72BW5QD2FOZ7FRFEP57Q\e&addr=192.162.129.11:22000
# Or with the X\-API\-Key header:
curl \-X POST \-\-header "X\-API\-Key: TcE28kVPdtJ8COws1JdM0b2nodj77WeQ" http://127.0.0.1:8384/rest/system/discovery?device=LGFPDIT7SKNNJVJZA4FC7QNCRKCE753K72BW5QD2FOZ7FRFEP57Q\e&addr=192.162.129.11:22000
.ft P
.fi
.UNINDENT
.UNINDENT
.SS POST /rest/system/error/clear
.sp
Post with empty to body to remove all recent errors.
.SS GET /rest/system/error
.sp
\fBNOTE:\fP
.INDENT 0.0
.INDENT 3.5
Return format changed in 0.12.0.
.UNINDENT
.UNINDENT
.sp
Returns the list of recent errors.
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
{
  "errors": [
    {
      "when": "2014\-09\-18T12:59:26.549953186+02:00",
      "message": "This is an error string"
    }
  ]
}
.ft P
.fi
.UNINDENT
.UNINDENT
.SS POST /rest/system/error
.sp
Post with an error message in the body (plain text) to register a new
error. The new error will be displayed on any active GUI clients.
.SS GET /rest/system/log
.sp
New in version 0.12.0.

.sp
Returns the list of recent log entries.
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
{
  "messages": [
    {
      "when": "2014\-09\-18T12:59:26.549953186+02:00",
      "message": "This is a log entry"
    }
  ]
}
.ft P
.fi
.UNINDENT
.UNINDENT
.SS POST /rest/system/pause
.sp
Pause the given device or all devices.
.sp
Takes the optional parameter \fBdevice\fP (device ID). When omitted,
pauses all devices.  Returns status 200 and no content upon success, or status
500 and a plain text error on failure.
.SS GET /rest/system/ping
.sp
Returns a \fB{"ping": "pong"}\fP object.
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
{
  "ping": "pong"
}
.ft P
.fi
.UNINDENT
.UNINDENT
.SS POST /rest/system/ping
.sp
Returns a \fB{"ping": "pong"}\fP object.
.SS POST /rest/system/reset
.sp
Post with empty body to erase the current index database and restart
Syncthing. With no query parameters, the entire database is erased from disk.
By specifying the \fBfolder\fP parameter with a valid folder ID, only
information for that folder will be erased:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
$ curl \-X POST \-H "X\-API\-Key: abc123" http://localhost:8384/rest/system/reset?folder=default
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
\fBCaution\fP: See \fB\-reset\-database\fP for \fB\&.stfolder\fP creation side\-effect and caution regarding mountpoints.
.SS POST /rest/system/restart
.sp
Post with empty body to immediately restart Syncthing.
.SS POST /rest/system/resume
.sp
Resume the given device or all devices.
.sp
Takes the optional parameter \fBdevice\fP (device ID). When omitted,
resumes all devices.  Returns status 200 and no content upon success, or status
500 and a plain text error on failure.
.SS POST /rest/system/shutdown
.sp
Post with empty body to cause Syncthing to exit and not restart.
.SS GET /rest/system/status
.sp
Returns information about current system status and resource usage. The CPU percent value has been deprecated from the API and will always report 0.
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
{
  "alloc": 30618136,
  "connectionServiceStatus": {
    "dynamic+https://relays.syncthing.net/endpoint": {
      "error": null,
      "lanAddresses": [
        "relay://23.92.71.120:443/?id=53STGR7\-YBM6FCX\-PAZ2RHM\-YPY6OEJ\-WYHVZO7\-PCKQRCK\-PZLTP7T\-434XCAD&pingInterval=1m0s&networkTimeout=2m0s&sessionLimitBps=0&globalLimitBps=0&statusAddr=:22070&providedBy=canton7"
      ],
      "wanAddresses": [
        "relay://23.92.71.120:443/?id=53STGR7\-YBM6FCX\-PAZ2RHM\-YPY6OEJ\-WYHVZO7\-PCKQRCK\-PZLTP7T\-434XCAD&pingInterval=1m0s&networkTimeout=2m0s&sessionLimitBps=0&globalLimitBps=0&statusAddr=:22070&providedBy=canton7"
      ]
    },
    "tcp://0.0.0.0:22000": {
      "error": null,
      "lanAddresses": [
        "tcp://0.0.0.0:22000"
      ],
      "wanAddresses": [
        "tcp://0.0.0.0:22000"
      ]
    }
  },
  "cpuPercent": 0,
  "discoveryEnabled": true,
  "discoveryErrors": {
    "global@https://discovery\-v4\-1.syncthing.net/v2/": "500 Internal Server Error",
    "global@https://discovery\-v4\-2.syncthing.net/v2/": "Post https://discovery\-v4\-2.syncthing.net/v2/: net/http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers)",
    "global@https://discovery\-v4\-3.syncthing.net/v2/": "Post https://discovery\-v4\-3.syncthing.net/v2/: net/http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers)",
    "global@https://discovery\-v6\-1.syncthing.net/v2/": "Post https://discovery\-v6\-1.syncthing.net/v2/: dial tcp [2001:470:28:4d6::5]:443: connect: no route to host",
    "global@https://discovery\-v6\-2.syncthing.net/v2/": "Post https://discovery\-v6\-2.syncthing.net/v2/: dial tcp [2604:a880:800:10::182:a001]:443: connect: no route to host",
    "global@https://discovery\-v6\-3.syncthing.net/v2/": "Post https://discovery\-v6\-3.syncthing.net/v2/: dial tcp [2400:6180:0:d0::d9:d001]:443: connect: no route to host"
  },
  "discoveryMethods": 8,
  "goroutines": 49,
  "lastDialStatus": {
      "tcp://10.20.30.40": {
        "when": "2019\-05\-16T07:41:23Z",
        "error": "dial tcp 10.20.30.40:22000: i/o timeout"
      },
      "tcp://172.16.33.3:22000": {
        "when": "2019\-05\-16T07:40:43Z",
        "ok": true
      },
      "tcp://83.233.120.221:22000": {
        "when": "2019\-05\-16T07:41:13Z",
        "error": "dial tcp 83.233.120.221:22000: connect: connection refused"
      }
  },
  "myID": "P56IOI7\-MZJNU2Y\-IQGDREY\-DM2MGTI\-MGL3BXN\-PQ6W5BM\-TBBZ4TJ\-XZWICQ2",
  "pathSeparator": "/",
  "startTime": "2016\-06\-06T19:41:43.039284753+02:00",
  "sys": 42092792,
  "themes": [
    "default",
    "dark"
  ],
  "tilde": "/Users/jb",
  "uptime": 2635
}
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
New in version 1.2.0: The \fBlastDialStatus\fP dictionary contains the last error (or \fBnull\fP for
success) for each peer address that Syncthing has attempted to contact.
The \fBconnectionServiceStatus\fP entries gained \fB"error": null\fP
attributes where previously there would be no \fBerror\fP attribute at all
in the success case.

.SS GET /rest/system/upgrade
.sp
Checks for a possible upgrade and returns an object describing the
newest version and upgrade possibility.
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
{
  "latest": "v0.14.47",
  "majorNewer": false,
  "newer": true,
  "running": "v0.14.46"
}
.ft P
.fi
.UNINDENT
.UNINDENT
.SS POST /rest/system/upgrade
.sp
Perform an upgrade to the newest released version and restart. Does
nothing if there is no newer version than currently running.
.SS GET /rest/system/version
.sp
Returns the current Syncthing version information.
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
{
  "arch": "amd64",
  "longVersion": "syncthing v0.10.27+3\-gea8c3de (go1.4 darwin\-amd64 default) jb@syno 2015\-03\-16 11:01:29 UTC",
  "os": "darwin",
  "version": "v0.10.27+3\-gea8c3de"
}
.ft P
.fi
.UNINDENT
.UNINDENT
.SH CONFIG ENDPOINTS
.SS Config Endpoints
.sp
New in version 1.12.0.

.sp
These endpoints facilitate access and modification of the configuration in a granular way. Config sent to the endpoints must be in the same
format as returned by the corresponding GET request. When posting the
configuration succeeds, the posted configuration is immediately applied, except
for changes that require a restart. Query \fI\%/rest/system/config/insync\fP to check if
a restart is required.
.sp
For all endpoints supporting \fBPATCH\fP, it takes the existing config and
unmarshals the given JSON object on top of it. This means all child objects will
replace the existing objects, not extend them. For example for
\fBRawListenAddresses\(ga in options, which is an array of strings, sending
\(ga\(ga{RawListenAddresses: ["tcp://10.0.0.2"]\fP will replace all existing listen
addresses.
.SS /rest/config
.sp
\fBGET\fP returns the entire config and \fBPUT\fP replaces it.
.SS /rest/system/config/insync
.sp
\fBGET\fP returns whether the config is in sync, i.e. whether the running configuration is
the same as that on disk or if a restart is required.
.SS /rest/config/folders, /rest/config/devices
.sp
\fBGET\fP returns all folders respectively devices as an array. \fBPUT\fP takes an array and
\fBPOST\fP a single object. In both cases if a given folder/device already exists,
it’s replaced, otherwise a new one is added.
.SS /rest/config/folders/*id*, /rest/config/devices/*id*
.sp
Put the desired folder\- respectively device\-ID in place of *id*. \fBGET\fP
returns the folder/device for the given ID, \fBPUT\fP replaces the entire config
and \fBPATCH\fP replaces only the given child objects.
.SS /rest/config/options, /rest/config/ldap, /rest/config/gui
.sp
\fBGET\fP returns the respective object, \fBPUT\fP replaces the entire object and
\fBPATCH\fP replaces only the given child objects.
.SH CLUSTER ENDPOINTS
.sp
Concerns the mesh network structure.
.SS GET /rest/cluster/pending/devices
.sp
New in version 1.13.0.

.sp
Lists remote devices which have tried to connect, but are not yet
configured in our instance.
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
{
  "P56IOI7\-MZJNU2Y\-IQGDREY\-DM2MGTI\-MGL3BXN\-PQ6W5BM\-TBBZ4TJ\-XZWICQ2": {
    "time": "2020\-03\-18T11:43:07Z",
    "name": "Friend Joe",
    "address": "192.168.1.2:22000"
  }
}
.ft P
.fi
.UNINDENT
.UNINDENT
.SS GET /rest/cluster/pending/folders
.sp
New in version 1.13.0.

.sp
Lists folders which remote devices have offered to us, but are not yet
shared from our instance to them.  Takes the optional \fBdevice\fP
parameter to only return folders offered by a specific remote device.
Other offering devices are also omitted from the result.
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
{
  "cpkn4\-57ysy": {
    "offeredBy": {
      "P56IOI7\-MZJNU2Y\-IQGDREY\-DM2MGTI\-MGL3BXN\-PQ6W5BM\-TBBZ4TJ\-XZWICQ2": {
        "time": "2020\-03\-18T11:43:07Z",
        "label": "Joe\(aqs folder"
      },
      "DOVII4U\-SQEEESM\-VZ2CVTC\-CJM4YN5\-QNV7DCU\-5U3ASRL\-YVFG6TH\-W5DV5AA": {
        "time": "2020\-03\-01T10:12:13Z",
        "label": "Jane\(aqs and Joe\(aqs folder"
      }
    }
  },
  "abcde\-fghij": {
    "offeredBy": {
      "P56IOI7\-MZJNU2Y\-IQGDREY\-DM2MGTI\-MGL3BXN\-PQ6W5BM\-TBBZ4TJ\-XZWICQ2": {
        "time": "2020\-03\-18T11:43:07Z",
        "label": "MyPics"
      }
    }
  }
}
.ft P
.fi
.UNINDENT
.UNINDENT
.SH DATABASE ENDPOINTS
.SS GET /rest/db/browse
.sp
Returns the directory tree of the global model. Directories are always
JSON objects (map/dictionary), and files are always arrays of
modification time and size. The first integer is the files modification
time, and the second integer is the file size.
.sp
The call takes one mandatory \fBfolder\fP parameter and two optional
parameters. Optional parameter \fBlevels\fP defines how deep within the
tree we want to dwell down (0 based, defaults to unlimited depth)
Optional parameter \fBprefix\fP defines a prefix within the tree where to
start building the structure.
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
$ curl \-s http://localhost:8384/rest/db/browse?folder=default | json_pp
{
   "directory": {
      "file": ["2015\-04\-20T22:20:45+09:00", 130940928],
      "subdirectory": {
         "another file": ["2015\-04\-20T22:20:45+09:00", 130940928]
      }
   },
   "rootfile": ["2015\-04\-20T22:20:45+09:00", 130940928]
}

$ curl \-s http://localhost:8384/rest/db/browse?folder=default&levels=0 | json_pp
{
   "directory": {},
   "rootfile": ["2015\-04\-20T22:20:45+09:00", 130940928]
}

$ curl \-s http://localhost:8384/rest/db/browse?folder=default&levels=1 | json_pp
{
   "directory": {
      "file": ["2015\-04\-20T22:20:45+09:00", 130940928],
      "subdirectory": {}
   },
   "rootfile": ["2015\-04\-20T22:20:45+09:00", 130940928]
}

$ curl \-s http://localhost:8384/rest/db/browse?folder=default&prefix=directory/subdirectory | json_pp
{
   "another file": ["2015\-04\-20T22:20:45+09:00", 130940928]
}

$ curl \-s http://localhost:8384/rest/db/browse?folder=default&prefix=directory&levels=0 | json_pp
{
   "file": ["2015\-04\-20T22:20:45+09:00", 130940928],
   "subdirectory": {}
}
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
\fBNOTE:\fP
.INDENT 0.0
.INDENT 3.5
This is an expensive call, increasing CPU and RAM usage on the device. Use sparingly.
.UNINDENT
.UNINDENT
.SS GET /rest/db/completion
.sp
Returns the completion percentage (0 to 100) and byte / item counts. Takes
optional \fBdevice\fP and \fBfolder\fP parameters:
.INDENT 0.0
.IP \(bu 2
\fBfolder\fP specifies the folder ID to calculate completion for. An empty
or absent \fBfolder\fP parameter means all folders as an aggregate.
.IP \(bu 2
\fBdevice\fP specifies the device ID to calculate completion for. An empty
or absent \fBdevice\fP parameter means the local device.
.UNINDENT
.sp
If a device is specified but no folder, completion is calculated for all
folders shared with that device.
.SS Example Queries
.sp
Completion status for folder \fBabcd\-1234\fP on device \fBI6KAH76\-...\-3PSROAU\fP:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
/rest/db/completion?folder=abcd\-1234&device=I6KAH76\-...\-3PSROAU
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Aggregated completion status for device \fBI6KAH76\-...\-3PSROAU\fP (all folders shared with them):
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
/rest/db/completion?device=I6KAH76\-...\-3PSROAU
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Completion status for folder \fBabcd\-1234\fP on the local device:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
/rest/db/completion?folder=abcd\-1234
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Aggregated completion status for all folders on the local device:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
/rest/db/completion
.ft P
.fi
.UNINDENT
.UNINDENT
.SS Example Response
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
{
  "completion": 99.9937565835,
  "globalBytes": 156793013575,
  "needBytes": 9789241,
  "globalItems": 7823,
  "needItems": 412,
  "needDeletes": 0
}
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
New in version 1.8.0: The ability to aggregate multiple folders by leaving out the folder ID.
Querying data for the local device by leaving out the device ID. Returning
the \fBglobalItems\fP counter in the response.

.SS GET /rest/db/file
.sp
Returns most data available about a given file, including version and
availability. Takes \fBfolder\fP and \fBfile\fP parameters.
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
{
  "availability": [
    {
      "id": "ITZRNXE\-YNROGBZ\-HXTH5P7\-VK5NYE5\-QHRQGE2\-7JQ6VNJ\-KZUEDIU\-5PPR5AM",
      "fromTemporary": false
    }
  ],
  "global": {
    "deleted": false,
    "ignored": false,
    "invalid": false,
    "localFlags": 0,
    "modified": "2018\-08\-18T12:21:13.836784059+02:00",
    "modifiedBy": "SYNO4VL",
    "mustRescan": false,
    "name": "testfile",
    "noPermissions": false,
    "numBlocks": 1,
    "permissions": "0755",
    "sequence": 107499,
    "size": 1234,
    "type": 0,
    "version": [
      "SYNO4VL:1"
    ]
  },
  "local": {
    "deleted": false,
    "ignored": false,
    "invalid": false,
    "localFlags": 0,
    "modified": "2018\-08\-18T12:21:13.836784059+02:00",
    "modifiedBy": "SYNO4VL",
    "mustRescan": false,
    "name": "testfile",
    "noPermissions": false,
    "numBlocks": 1,
    "permissions": "0755",
    "sequence": 111038,
    "size": 1234,
    "type": 0,
    "version": [
      "SYNO4VL:1"
    ]
  }
}
.ft P
.fi
.UNINDENT
.UNINDENT
.SS GET /rest/db/ignores
.sp
Takes one parameter, \fBfolder\fP, and returns the content of the
\fB\&.stignore\fP as the \fBignore\fP field. A second field, \fBexpanded\fP,
provides a list of strings which represent globbing patterns described by gobwas/glob (based on standard wildcards) that match the patterns in \fB\&.stignore\fP and all the includes. If appropriate these globs are prepended by the following modifiers: \fB!\fP to negate the glob, \fB(?i)\fP to do case insensitive matching and \fB(?d)\fP to enable removing of ignored files in an otherwise empty directory.
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
{
  "ignore": [
    "(?i)/Backups"
  ],
  "expanded": [
    "(?i)Backups",
    "(?i)Backups/**"
  ]
}
.ft P
.fi
.UNINDENT
.UNINDENT
.SS POST /rest/db/ignores
.sp
Expects a format similar to the output of \fBGET\fP call, but only
containing the \fBignore\fP field (\fBexpanded\fP field should be omitted).
It takes one parameter, \fBfolder\fP, and either updates the content of
the \fB\&.stignore\fP echoing it back as a response, or returns an error.
.SS GET /rest/db/need
.sp
Takes one mandatory parameter, \fBfolder\fP, and returns lists of files which are
needed by this device in order for it to become in sync.
.sp
Furthermore takes an optional \fBpage\fP and \fBperpage\fP arguments for pagination.
Pagination happens, across the union of all needed files, that is \- across all
3 sections of the response.
For example, given the current need state is as follows:
.INDENT 0.0
.IP 1. 3
\fBprogress\fP has 15 items
.IP 2. 3
\fBqueued\fP has 3 items
.IP 3. 3
\fBrest\fP has 12 items
.UNINDENT
.sp
If you issue a query with \fBpage=1\fP and \fBperpage=10\fP, only the \fBprogress\fP
section in the response will have 10 items. If you issue a request query with
\fBpage=2\fP and \fBperpage=10\fP, \fBprogress\fP section will have the last 5 items,
\fBqueued\fP section will have all 3 items, and \fBrest\fP section will have first
2 items. If you issue a query for \fBpage=3\fP and \fBperpage=10\fP, you will only
have the last 10 items of the \fBrest\fP section.
.sp
In all these calls, \fBtotal\fP will be 30 to indicate the total number of
available items.
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
{
  # Files currently being downloaded
  "progress": [
    {
      "flags": "0755",
      "sequence": 6,
      "modified": "2015\-04\-20T23:06:12+09:00",
      "name": "ls",
      "size": 34640,
      "version": [
        "5157751870738175669:1"
      ]
    }
  ],
  # Files queued to be downloaded next (as per array order)
  "queued": [
      ...
  ],
  # Files to be downloaded after all queued files will be downloaded.
  # This happens when we start downloading files, and new files get added while we are downloading.
  "rest": [
      ...
  ],
  "page": 1,
  "perpage": 100,
  "total": 2000
}
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
\fBNOTE:\fP
.INDENT 0.0
.INDENT 3.5
This is an expensive call, increasing CPU and RAM usage on the device. Use sparingly.
.UNINDENT
.UNINDENT
.SS POST /rest/db/override
.sp
Request override of a send only folder. Override means to make the local
version latest, overriding changes made on other devices. This API call does
nothing if the folder is not a send only folder.
.sp
Takes the mandatory parameter \fIfolder\fP (folder ID).
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
curl \-X POST \-H X\-API\-key:... http://127.0.0.1:8384/rest/db/override?folder=default
.ft P
.fi
.UNINDENT
.UNINDENT
.SS POST /rest/db/prio
.sp
Moves the file to the top of the download queue.
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
curl \-X POST http://127.0.0.1:8384/rest/db/prio?folder=default&file=foo/bar
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Response contains the same output as \fBGET /rest/db/need\fP
.SS POST /rest/db/revert
.sp
New in version 0.14.50.

.sp
Request revert of a receive only folder. Reverting a folder means to undo
all local changes. This API call does nothing if the folder is not a receive
only folder.
.sp
Takes the mandatory parameter \fIfolder\fP (folder ID).
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
curl \-X POST \-H X\-API\-Key:... http://127.0.0.1:8384/rest/db/revert?folder=default
.ft P
.fi
.UNINDENT
.UNINDENT
.SS POST /rest/db/scan
.sp
Request immediate scan. Takes the optional parameters \fBfolder\fP (folder ID),
\fBsub\fP (path relative to the folder root) and \fBnext\fP (time in seconds). If
\fBfolder\fP is omitted or empty all folders are scanned. If \fBsub\fP is given,
only this path (and children, in case it’s a directory) is scanned. The \fBnext\fP
argument delays Syncthing’s automated rescan interval for a given amount of
seconds.
.sp
Requesting scan of a path that no longer exists, but previously did, is
valid and will result in Syncthing noticing the deletion of the path in
question.
.sp
Returns status 200 and no content upon success, or status 500 and a
plain text error if an error occurred during scanning.
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
curl \-X POST http://127.0.0.1:8384/rest/db/scan?folder=default&sub=foo/bar
.ft P
.fi
.UNINDENT
.UNINDENT
.SS GET /rest/db/status
.sp
Returns information about the current status of a folder.
.sp
Parameters: \fBfolder\fP, the ID of a folder.
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
{
  "globalBytes": 0,
  "globalDeleted": 0,
  "globalDirectories": 0,
  "globalFiles": 0,
  "globalSymlinks": 0,
  "globalTotalItems": 0,
  "ignorePatterns": false,
  "inSyncBytes": 0,
  "inSyncFiles": 0,
  "invalid": "",
  "localBytes": 0,
  "localDeleted": 0,
  "localDirectories": 0,
  "localFiles": 0,
  "localSymlinks": 0,
  "localTotalItems": 0,
  "needBytes": 0,
  "needDeletes": 0,
  "needDirectories": 0,
  "needFiles": 0,
  "needSymlinks": 0,
  "needTotalItems": 0,
  "pullErrors": 0,
  "receiveOnlyChangedBytes": 0,
  "receiveOnlyChangedDeletes": 0,
  "receiveOnlyChangedDirectories": 0,
  "receiveOnlyChangedFiles": 0,
  "receiveOnlyChangedSymlinks": 0,
  "receiveOnlyTotalItems": 0,
  "sequence": 0,
  "state": "idle",
  "stateChanged": "2018\-08\-08T07:04:57.301064781+02:00",
  "version": 0
}
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
The various fields have the following meaning:
.INDENT 0.0
.TP
.B global*:
Data in the cluster latest version.
.TP
.B inSync*:
Data that is locally the same as the cluster latest version.
.TP
.B local*:
Data that is locally present, regardless of whether it’s the same or different version as the cluster latest version.
.TP
.B need*:
Data that is needed to become up to date with the cluster latest version (i.e., data that is out of sync).
.TP
.B receiveOnlyChanged*:
Data that has changed locally in a receive only folder, and thus not been sent to the cluster.
.TP
.B invalid:
Deprecated, always empty.
.TP
.B pullErrors:
The number of files that failed to sync during the last sync operations.
.TP
.B sequence:
The current folder sequence number.
.TP
.B state:
The current folder state.
.TP
.B stateChanged:
When the folder state last changed.
.TP
.B version:
Deprecated, equivalent to the sequence number.
.UNINDENT
.sp
\fBNOTE:\fP
.INDENT 0.0
.INDENT 3.5
This is an expensive call, increasing CPU and RAM usage on the device. Use sparingly.
.UNINDENT
.UNINDENT
.SH EVENT ENDPOINTS
.SS GET /rest/events
.sp
To receive events, perform a HTTP GET of \fB/rest/events\fP\&.
.sp
To filter the event list, in effect creating a specific subscription for
only the desired event types, add a parameter
\fBevents=EventTypeA,EventTypeB,...\fP where the event types are any of the event\-types\&.
.sp
The optional parameter \fBsince=<lastSeenID>\fP sets the ID of the last event
you’ve already seen. Syncthing returns a JSON encoded array of event objects,
starting at the event just after the one with this last seen ID. The default
value is 0, which returns all events. There is a limit to the number of events
buffered, so if the rate of events is high or the time between polling calls is
long some events might be missed. This can be detected by noting a discontinuity
in the event IDs.
.sp
If no new events are produced since \fB<lastSeenID>\fP, the HTTP call blocks and
waits for new events to happen before returning. By default it times out after
60 seconds returning an empty array. The time out duration can be customized
with the optional parameter \fBtimeout=<seconds>\fP\&.
.sp
To receive only a limited number of events, add the \fBlimit=<n>\fP parameter with a
suitable value for \fBn\fP and only the \fIlast\fP \fBn\fP events will be returned. This
can be used to catch up with the latest event ID after a disconnection for
example: \fB/rest/events?since=0&limit=1\fP\&.
.SH STATISTICS ENDPOINTS
.SS GET /rest/stats/device
.sp
Returns general statistics about devices. Currently, only contains the
time the device was last seen.
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
$ curl \-s http://localhost:8384/rest/stats/device | json
{
  "P56IOI7\-MZJNU2Y\-IQGDREY\-DM2MGTI\-MGL3BXN\-PQ6W5BM\-TBBZ4TJ\-XZWICQ2": {
    "lastSeen" : "2015\-04\-18T11:21:31.3256277+01:00"
  }
}
.ft P
.fi
.UNINDENT
.UNINDENT
.SS GET /rest/stats/folder
.sp
Returns general statistics about folders. Currently contains the
last scan time and the last synced file.
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
$ curl \-s http://localhost:8384/rest/stats/folder | json
{
  "folderid" : {
    "lastScan": "2016\-06\-02T13:28:01.288181412\-04:00",
    "lastFile" : {
      "filename" : "file/name",
        "at" : "2015\-04\-16T22:04:18.3066971+01:00"
      }
  }
}
.ft P
.fi
.UNINDENT
.UNINDENT
.SH MISC SERVICES ENDPOINTS
.SS GET /rest/svc/deviceid
.sp
Verifies and formats a device ID. Accepts all currently valid formats
(52 or 56 characters with or without separators, upper or lower case,
with trivial substitutions). Takes one parameter, \fBid\fP, and returns
either a valid device ID in modern format, or an error.
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
$ curl \-s http://localhost:8384/rest/svc/deviceid?id=1234 | json
{
  "error": "device ID invalid: incorrect length"
}

$ curl \-s http://localhost:8384/rest/svc/deviceid?id=p56ioi7m\-\-zjnu2iq\-gdr\-eydm\-2mgtmgl3bxnpq6w5btbbz4tjxzwicq | json
{
  "id": "P56IOI7\-MZJNU2Y\-IQGDREY\-DM2MGTI\-MGL3BXN\-PQ6W5BM\-TBBZ4TJ\-XZWICQ2"
}
.ft P
.fi
.UNINDENT
.UNINDENT
.SS GET /rest/svc/lang
.sp
Returns a list of canonicalized localization codes, as picked up from
the \fBAccept\-Language\fP header sent by the browser.
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
["sv_sv","sv","en_us","en"]
.ft P
.fi
.UNINDENT
.UNINDENT
.SS GET /rest/svc/random/string
.sp
Returns a strong random generated string (alphanumeric) of the specified length. Takes the \fBlength\fP parameter.
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
{
  "random": "FdPaEaZQ56sXEKYNxpgF"
}
.ft P
.fi
.UNINDENT
.UNINDENT
.SS GET /rest/svc/report
.sp
Returns the data sent in the anonymous usage report.
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
{
   "folderMaxMiB" : 0,
   "platform" : "linux\-amd64",
   "totMiB" : 0,
   "longVersion" : "syncthing v0.12.2 \e"Beryllium Bedbug\e" (go1.4.3 linux\-amd64 default) unknown\-user@build2.syncthing.net 2015\-11\-09 13:23:26 UTC",
   "upgradeAllowedManual" : true,
   "totFiles" : 3,
   "folderUses" : {
      "ignorePerms" : 0,
      "autoNormalize" : 0,
      "sendonly" : 0,
      "ignoreDelete" : 0
   },
   "memoryUsageMiB" : 13,
   "version" : "v0.12.2",
   "sha256Perf" : 27.28,
   "numFolders" : 2,
   "memorySize" : 1992,
   "announce" : {
      "defaultServersIP" : 0,
      "otherServers" : 0,
      "globalEnabled" : false,
      "defaultServersDNS" : 1,
      "localEnabled" : false
   },
   "usesRateLimit" : false,
   "numCPU" : 2,
   "uniqueID" : "",
   "urVersion" : 2,
   "rescanIntvs" : [
      60,
      60
   ],
   "numDevices" : 2,
   "folderMaxFiles" : 3,
   "relays" : {
      "defaultServers" : 1,
      "enabled" : true,
      "otherServers" : 0
   },
   "deviceUses" : {
      "compressMetadata" : 1,
      "customCertName" : 0,
      "staticAddr" : 1,
      "compressAlways" : 0,
      "compressNever" : 1,
      "introducer" : 0,
      "dynamicAddr" : 1
   },
   "upgradeAllowedAuto" : false
}
.ft P
.fi
.UNINDENT
.UNINDENT
.SH AUTHOR
The Syncthing Authors
.SH COPYRIGHT
2014-2019, The Syncthing Authors
.\" Generated by docutils manpage writer.
.
